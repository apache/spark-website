<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
     Spark Release 2.4.7 | Apache Spark
    
  </title>

  

  

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
  <link href="/css/custom.css" rel="stylesheet">
  <!-- Code highlighter CSS -->
  <link href="/css/pygments-default.css" rel="stylesheet">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body class="global">
<nav class="navbar navbar-expand-lg navbar-dark p-0 px-4" style="background: #1D6890;">
  <a class="navbar-brand" href="/">
    <img src="/images/spark-logo-rev.svg" alt="" width="141" height="72">
  </a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
          aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse col-md-12 col-lg-auto pt-4" id="navbarContent">

    <ul class="navbar-nav me-auto">
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="/downloads.html">Download</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="libraries" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Libraries
        </a>
        <ul class="dropdown-menu" aria-labelledby="libraries">
          <li><a class="dropdown-item" href="/sql/">SQL and DataFrames</a></li>
          <li><a class="dropdown-item" href="/streaming/">Spark Streaming</a></li>
          <li><a class="dropdown-item" href="/mllib/">MLlib (machine learning)</a></li>
          <li><a class="dropdown-item" href="/graphx/">GraphX (graph)</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" href="/third-party-projects.html">Third-Party Projects</a></li>
        </ul>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="documentation" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Documentation
        </a>
        <ul class="dropdown-menu" aria-labelledby="documentation">
          <li><a class="dropdown-item" href="/docs/latest/">Latest Release</a></li>
          <li><a class="dropdown-item" href="/documentation.html">Older Versions and Other Resources</a></li>
          <li><a class="dropdown-item" href="/faq.html">Frequently Asked Questions</a></li>
        </ul>
      </li>
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="/examples.html">Examples</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="community" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Community
        </a>
        <ul class="dropdown-menu" aria-labelledby="community">
          <li><a class="dropdown-item" href="/community.html">Mailing Lists &amp; Resources</a></li>
          <li><a class="dropdown-item" href="/contributing.html">Contributing to Spark</a></li>
          <li><a class="dropdown-item" href="/improvement-proposals.html">Improvement Proposals (SPIP)</a>
          </li>
          <li><a class="dropdown-item" href="https://issues.apache.org/jira/browse/SPARK">Issue Tracker</a>
          </li>
          <li><a class="dropdown-item" href="/powered-by.html">Powered By</a></li>
          <li><a class="dropdown-item" href="/committers.html">Project Committers</a></li>
          <li><a class="dropdown-item" href="/history.html">Project History</a></li>
        </ul>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="developers" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Developers
        </a>
        <ul class="dropdown-menu" aria-labelledby="developers">
          <li><a class="dropdown-item" href="/developer-tools.html">Useful Developer Tools</a></li>
          <li><a class="dropdown-item" href="/versioning-policy.html">Versioning Policy</a></li>
          <li><a class="dropdown-item" href="/release-process.html">Release Process</a></li>
          <li><a class="dropdown-item" href="/security.html">Security</a></li>
        </ul>
      </li>
    </ul>
    <ul class="navbar-nav ml-auto">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="apacheFoundation" role="button"
           data-bs-toggle="dropdown" aria-expanded="false">
          Apache Software Foundation
        </a>
        <ul class="dropdown-menu" aria-labelledby="apacheFoundation">
          <li><a class="dropdown-item" href="https://www.apache.org/">Apache Homepage</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/licenses/">License</a></li>
          <li><a class="dropdown-item"
                 href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/security/">Security</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/events/current-event">Event</a></li>
        </ul>
      </li>
    </ul>
  </div>
</nav>

<div class="container">
  <div class="row mt-4">
    <div class="col-12 col-md-9">
      <h2>Spark Release 2.4.7</h2>


<p>Spark 2.4.7 is a maintenance release containing stability, correctness, and security fixes. This release is based on the branch-2.4 maintenance branch of Spark. We strongly recommend all 2.4 users to upgrade to this stable release.</p>

<h3 id="notable-changes">Notable changes</h3>
<p>[SPARK-28818] - FrequentItems applies an incorrect schema to the resulting dataframe when nulls are present</p>

<p>[SPARK-31511] - Make BytesToBytesMap iterator() thread-safe</p>

<p>[SPARK-31703] - Changes made by SPARK-26985 break reading parquet files correctly in BigEndian architectures (AIX + LinuxPPC64)</p>

<p>[SPARK-31854] - Different results of query execution with wholestage codegen on and off</p>

<p>[SPARK-31903] - toPandas with Arrow enabled doesn&#8217;t show metrics in Query UI.</p>

<p>[SPARK-31923] - Event log cannot be generated when some internal accumulators use unexpected types</p>

<p>[SPARK-31935] - Hadoop file system config should be effective in data source options</p>

<p>[SPARK-31941] - Handling the exception in SparkUI for getSparkUser method</p>

<p>[SPARK-31967] - Loading jobs UI page takes 40 seconds</p>

<p>[SPARK-31968] - write.partitionBy() creates duplicate subdirectories when user provides duplicate columns</p>

<p>[SPARK-31980] - Spark sequence() fails if start and end of range are identical dates</p>

<p>[SPARK-31997] - Should drop test_udtf table when SingleSessionSuite completed</p>

<p>[SPARK-32000] - Fix the flaky testcase for partially launched task in barrier-mode.</p>

<p>[SPARK-32003] - Shuffle files for lost executor are not unregistered if fetch failure occurs after executor is lost</p>

<p>[SPARK-32024] - Disk usage tracker went negative in HistoryServerDiskManager</p>

<p>[SPARK-32028] - App id link in history summary page point to wrong application attempt</p>

<p>[SPARK-32034] - Port HIVE-14817: Shutdown the SessionManager timeoutChecker thread properly upon shutdown</p>

<p>[SPARK-32044] - [SS] 2.4 Kafka continuous processing print mislead initial offsets log</p>

<p>[SPARK-32098] - Use iloc for positional slicing instead of direct slicing in createDataFrame with Arrow</p>

<p>[SPARK-32115] - Incorrect results for SUBSTRING when overflow</p>

<p>[SPARK-32131] - Fix AnalysisException messages at UNION/INTERSECT/EXCEPT/MINUS operations</p>

<p>[SPARK-32167] - nullability of GetArrayStructFields is incorrect</p>

<p>[SPARK-32214] - The type conversion function generated in makeFromJava for &#8220;other&#8221; type uses a wrong variable.</p>

<p>[SPARK-32238] - Use Utils.getSimpleName to avoid hitting Malformed class name in ScalaUDF</p>

<p>[SPARK-32280] - AnalysisException thrown when query contains several JOINs</p>

<p>[SPARK-32300] - toPandas with no partitions should work</p>

<p>[SPARK-32344] - Unevaluable expr is set to FIRST/LAST ignoreNullsExpr in distinct aggregates</p>

<p>[SPARK-32364] - Use CaseInsensitiveMap for DataFrameReader/Writer options</p>

<p>[SPARK-32372] - &#8220;Resolved attribute(s) XXX missing&#8221; after dudup conflict references</p>

<p>[SPARK-32377] - CaseInsensitiveMap should be deterministic for addition</p>

<p>[SPARK-32609] - Incorrect exchange reuse with DataSourceV2</p>

<p>[SPARK-32672] - Data corruption in some cached compressed boolean columns</p>

<p>[SPARK-32693] - Compare two dataframes with same schema except nullable property</p>

<p>[SPARK-32771] - The example of expressions.Aggregator in Javadoc / Scaladoc is wrong</p>

<p>[SPARK-32810] - CSV/JSON data sources should avoid globbing paths when inferring schema</p>

<p>[SPARK-32812] - Run tests script for Python fails in certain environments</p>

<h3 id="dependency-changes">Dependency Changes</h3>

<h3 id="known-issues">Known issues</h3>

<p>You can consult JIRA for the <a href="https://s.apache.org/v2.4.7-release-notes">detailed changes</a>.</p>

<p>We would like to acknowledge all community members for contributing patches to this release.</p>



<p>
<br/>
<a href="/news/">Spark News Archive</a>
</p>

    </div>
    <div class="col-12 col-md-3">
      <div class="news" style="margin-bottom: 20px;">
        <h5>Latest News</h5>
        <ul class="list-unstyled">
          
          <li><a href="/news/spark-3-4-1-released.html">Spark 3.4.1 released</a>
            <span class="small">(Jun 23, 2023)</span></li>
          
          <li><a href="/news/spark-3-4-0-released.html">Spark 3.4.0 released</a>
            <span class="small">(Apr 13, 2023)</span></li>
          
          <li><a href="/news/spark-3-2-4-released.html">Spark 3.2.4 released</a>
            <span class="small">(Apr 13, 2023)</span></li>
          
          <li><a href="/news/spark-3-3-2-released.html">Spark 3.3.2 released</a>
            <span class="small">(Feb 17, 2023)</span></li>
          
        </ul>
        <p class="small" style="text-align: right;"><a href="/news/index.html">Archive</a></p>
      </div>
      <div style="text-align:center; margin-bottom: 20px;">
        <a href="https://www.apache.org/events/current-event.html">
          <img src="https://www.apache.org/events/current-event-234x60.png" style="max-width: 100%;"/>
        </a>
      </div>
      <div class="hidden-xs hidden-sm">
        <a href="/downloads.html" class="btn btn-cta btn-lg d-grid" style="margin-bottom: 30px;">
          Download Spark
        </a>
        <p style="font-size: 16px; font-weight: 500; color: #555;">
          Built-in Libraries:
        </p>
        <ul class="list-none">
          <li><a href="/sql/">SQL and DataFrames</a></li>
          <li><a href="/streaming/">Spark Streaming</a></li>
          <li><a href="/mllib/">MLlib (machine learning)</a></li>
          <li><a href="/graphx/">GraphX (graph)</a></li>
        </ul>
        <a href="/third-party-projects.html">Third-Party Projects</a>
      </div>
    </div>
  </div>

  

  <footer class="small">
    <hr>
    Apache Spark, Spark, Apache, the Apache feather logo, and the Apache Spark project logo are either registered
    trademarks or trademarks of The Apache Software Foundation in the United States and other countries.
    See guidance on use of Apache Spark <a href="/trademarks.html">trademarks</a>.
    All other marks mentioned may be trademarks or registered trademarks of their respective owners.
    Copyright &copy; 2018 The Apache Software Foundation, Licensed under the
    <a href="https://www.apache.org/licenses/">Apache License, Version 2.0</a>.
  </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery.js"></script>
<script src="/js/lang-tabs.js"></script>
<script src="/js/downloads.js"></script>
</body>
</html>
