<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
     Spark Release 3.3.4 | Apache Spark
    
  </title>

  

  

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
  <link href="/css/custom.css" rel="stylesheet">
  <!-- Code highlighter CSS -->
  <link href="/css/pygments-default.css" rel="stylesheet">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

  <!-- Matomo -->
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="https://analytics.apache.org/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '40']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <!-- End Matomo Code -->
</head>
<body class="global">
<nav class="navbar navbar-expand-lg navbar-dark p-0 px-4" style="background: #1D6890;">
  <a class="navbar-brand" href="/">
    <img src="/images/spark-logo-rev.svg" alt="" width="141" height="72">
  </a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
          aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse col-md-12 col-lg-auto pt-4" id="navbarContent">

    <ul class="navbar-nav me-auto">
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="/downloads.html">Download</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="libraries" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Libraries
        </a>
        <ul class="dropdown-menu" aria-labelledby="libraries">
          <li><a class="dropdown-item" href="/sql/">SQL and DataFrames</a></li>
          <li><a class="dropdown-item" href="/streaming/">Spark Streaming</a></li>
          <li><a class="dropdown-item" href="/mllib/">MLlib (machine learning)</a></li>
          <li><a class="dropdown-item" href="/graphx/">GraphX (graph)</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" href="/third-party-projects.html">Third-Party Projects</a></li>
        </ul>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="documentation" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Documentation
        </a>
        <ul class="dropdown-menu" aria-labelledby="documentation">
          <li><a class="dropdown-item" href="/docs/latest/">Latest Release</a></li>
          <li><a class="dropdown-item" href="/documentation.html">Older Versions and Other Resources</a></li>
          <li><a class="dropdown-item" href="/faq.html">Frequently Asked Questions</a></li>
        </ul>
      </li>
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="/examples.html">Examples</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="community" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Community
        </a>
        <ul class="dropdown-menu" aria-labelledby="community">
          <li><a class="dropdown-item" href="/community.html">Mailing Lists &amp; Resources</a></li>
          <li><a class="dropdown-item" href="/contributing.html">Contributing to Spark</a></li>
          <li><a class="dropdown-item" href="/improvement-proposals.html">Improvement Proposals (SPIP)</a>
          </li>
          <li><a class="dropdown-item" href="https://issues.apache.org/jira/browse/SPARK">Issue Tracker</a>
          </li>
          <li><a class="dropdown-item" href="/powered-by.html">Powered By</a></li>
          <li><a class="dropdown-item" href="/committers.html">Project Committers</a></li>
          <li><a class="dropdown-item" href="/history.html">Project History</a></li>
        </ul>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="developers" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Developers
        </a>
        <ul class="dropdown-menu" aria-labelledby="developers">
          <li><a class="dropdown-item" href="/developer-tools.html">Useful Developer Tools</a></li>
          <li><a class="dropdown-item" href="/versioning-policy.html">Versioning Policy</a></li>
          <li><a class="dropdown-item" href="/release-process.html">Release Process</a></li>
          <li><a class="dropdown-item" href="/security.html">Security</a></li>
        </ul>
      </li>
    </ul>
    <ul class="navbar-nav ml-auto">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="apacheFoundation" role="button"
           data-bs-toggle="dropdown" aria-expanded="false">
          Apache Software Foundation
        </a>
        <ul class="dropdown-menu" aria-labelledby="apacheFoundation">
          <li><a class="dropdown-item" href="https://www.apache.org/">Apache Homepage</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/licenses/">License</a></li>
          <li><a class="dropdown-item"
                 href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/security/">Security</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/events/current-event">Event</a></li>
        </ul>
      </li>
    </ul>
  </div>
</nav>

<div class="container">
  <div class="row mt-4">
    <div class="col-12 col-md-9">
      <h2>Spark Release 3.3.4</h2>


<p>Spark 3.3.4 is the last maintenance release containing security and correctness fixes. This release is based on the branch-3.3 maintenance branch of Spark. We strongly recommend all 3.3 users to upgrade to this stable release.</p>

<h3 id="notable-changes">Notable changes</h3>

<ul>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-43327">[SPARK-43327]</a>: Trigger <code class="language-plaintext highlighter-rouge">committer.setupJob</code> before plan execute in <code class="language-plaintext highlighter-rouge">FileFormatWriter#write</code></li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-43393">[SPARK-43393]</a>: Address sequence expression overflow bug</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-44547">[SPARK-44547]</a>: Ignore fallback storage for cached RDD migration</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-44581">[SPARK-44581]</a>: Fix the bug that ShutdownHookManager gets wrong UGI from SecurityManager of ApplicationMaster</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-44725">[SPARK-44725]</a>: Document <code class="language-plaintext highlighter-rouge">spark.network.timeoutInterval</code></li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-44805">[SPARK-44805]</a>: getBytes/getShorts/getInts/etc. should work in a column vector that has a dictionary</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-44857">[SPARK-44857]</a>: Fix <code class="language-plaintext highlighter-rouge">getBaseURI</code> error in Spark Worker LogPage UI buttons</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-44871">[SPARK-44871]</a>: Fix percentile_disc behaviour</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-44920">[SPARK-44920]</a>: Use await() instead of awaitUninterruptibly() in TransportClientFactory.createClient()</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-44925">[SPARK-44925]</a>: K8s default service token file should not be materialized into token</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-44935">[SPARK-44935]</a>: Fix <code class="language-plaintext highlighter-rouge">RELEASE</code> file to have the correct information in Docker images if exists</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-44937">[SPARK-44937]</a>: Mark connection as timedOut in TransportClient.close</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-44973">[SPARK-44973]</a>: Fix <code class="language-plaintext highlighter-rouge">ArrayIndexOutOfBoundsException</code> in <code class="language-plaintext highlighter-rouge">conv()</code></li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-44990">[SPARK-44990]</a>: Reduce the frequency of get <code class="language-plaintext highlighter-rouge">spark.sql.legacy.nullValueWrittenAsQuotedEmptyStringCsv</code></li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45057">[SPARK-45057]</a>: Avoid acquire read lock when keepReadLock is false</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45079">[SPARK-45079]</a>: Fix an internal error from <code class="language-plaintext highlighter-rouge">percentile_approx()</code> on <code class="language-plaintext highlighter-rouge">NULL</code> accuracy</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45100">[SPARK-45100]</a>: Fix an internal error from <code class="language-plaintext highlighter-rouge">reflect()</code>on <code class="language-plaintext highlighter-rouge">NULL</code> class and method</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45187">[SPARK-45187]</a>: Fix <code class="language-plaintext highlighter-rouge">WorkerPage</code> to use the same pattern for <code class="language-plaintext highlighter-rouge">logPage</code> urls</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45227">[SPARK-45227]</a>: Fix a subtle thread-safety issue with CoarseGrainedExecutorBackend</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45389">[SPARK-45389]</a>: Correct MetaException matching rule on getting partition metadata</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45430">[SPARK-45430]</a>: Fix for FramelessOffsetWindowFunction when IGNORE NULLS and offset &gt; rowCount</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45508">[SPARK-45508]</a>: Add &#8220;&#8211;add-opens=java.base/jdk.internal.ref=ALL-UNNAMED&#8221; so Platform can access Cleaner on Java 9+</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45580">[SPARK-45580]</a>: Handle case where a nested subquery becomes an existence join</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45670">[SPARK-45670]</a>: SparkSubmit does not support <code class="language-plaintext highlighter-rouge">--total-executor-cores</code> when deploying on K8s</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45749">[SPARK-45749]</a>: Fix <code class="language-plaintext highlighter-rouge">Spark History Server</code> to sort <code class="language-plaintext highlighter-rouge">Duration</code> column properly</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45920">[SPARK-45920]</a>: group by ordinal should be idempotent</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46006">[SPARK-46006]</a>: YarnAllocator miss clean targetNumExecutorsPerResourceProfileId after YarnSchedulerBackend call stop</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46012">[SPARK-46012]</a>: EventLogFileReader should not read rolling logs if app status file is missing</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46029">[SPARK-46029]</a>: Escape the single quote, _ and % for DS V2 pushdown</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46092">[SPARK-46092]</a>: Don&#8217;t push down Parquet row group filters that overflow</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46095">[SPARK-46095]</a>: Document <code class="language-plaintext highlighter-rouge">REST API</code> for Spark Standalone Cluster</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46239">[SPARK-46239]</a>: Hide <code class="language-plaintext highlighter-rouge">Jetty</code> info</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-46286">[SPARK-46286]</a>: Document <code class="language-plaintext highlighter-rouge">spark.io.compression.zstd.bufferPool.enabled</code></li>
</ul>

<h3 id="dependency-changes">Dependency Changes</h3>

<p>While being a maintenance release we did still upgrade some dependencies in this release they are:</p>

<ul>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-45885">[SPARK-45885]</a>: Upgrade ORC to 1.7.10</li>
</ul>

<p>You can consult JIRA for the <a href="https://s.apache.org/spark-3.3.4">detailed changes</a>.</p>

<p>We would like to acknowledge all community members for contributing patches to this release.</p>



<p>
<br/>
<a href="/news/">Spark News Archive</a>
</p>

    </div>
    <div class="col-12 col-md-3">
      <div class="news" style="margin-bottom: 20px;">
        <h5>Latest News</h5>
        <ul class="list-unstyled">
          
          <li><a href="/news/spark-3-5-1-released.html">Spark 3.5.1 released</a>
            <span class="small">(Feb 23, 2024)</span></li>
          
          <li><a href="/news/spark-3-3-4-released.html">Spark 3.3.4 released</a>
            <span class="small">(Dec 16, 2023)</span></li>
          
          <li><a href="/news/spark-3-4-2-released.html">Spark 3.4.2 released</a>
            <span class="small">(Nov 30, 2023)</span></li>
          
          <li><a href="/news/spark-3-5-0-released.html">Spark 3.5.0 released</a>
            <span class="small">(Sep 13, 2023)</span></li>
          
        </ul>
        <p class="small" style="text-align: right;"><a href="/news/index.html">Archive</a></p>
      </div>
      <div style="text-align:center; margin-bottom: 20px;">
        <a href="https://www.apache.org/events/current-event.html">
          <img src="https://www.apache.org/events/current-event-234x60.png" style="max-width: 100%;"/>
        </a>
      </div>
      <div class="hidden-xs hidden-sm">
        <a href="/downloads.html" class="btn btn-cta btn-lg d-grid" style="margin-bottom: 30px;">
          Download Spark
        </a>
        <p style="font-size: 16px; font-weight: 500; color: #555;">
          Built-in Libraries:
        </p>
        <ul class="list-none">
          <li><a href="/sql/">SQL and DataFrames</a></li>
          <li><a href="/streaming/">Spark Streaming</a></li>
          <li><a href="/mllib/">MLlib (machine learning)</a></li>
          <li><a href="/graphx/">GraphX (graph)</a></li>
        </ul>
        <a href="/third-party-projects.html">Third-Party Projects</a>
      </div>
    </div>
  </div>

  

  <footer class="small">
    <hr>
    Apache Spark, Spark, Apache, the Apache feather logo, and the Apache Spark project logo are either registered
    trademarks or trademarks of The Apache Software Foundation in the United States and other countries.
    See guidance on use of Apache Spark <a href="/trademarks.html">trademarks</a>.
    All other marks mentioned may be trademarks or registered trademarks of their respective owners.
    Copyright &copy; 2018 The Apache Software Foundation, Licensed under the
    <a href="https://www.apache.org/licenses/">Apache License, Version 2.0</a>.
  </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery.js"></script>
<script src="/js/lang-tabs.js"></script>
<script src="/js/downloads.js"></script>
</body>
</html>
