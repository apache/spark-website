<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_362) on Sun Apr 09 21:41:41 UTC 2023 -->
<title>DataWriter (Spark 3.2.4 JavaDoc)</title>
<meta name="date" content="2023-04-09">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DataWriter (Spark 3.2.4 JavaDoc)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":18,"i3":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/spark/sql/connector/write/BatchWrite.html" title="interface in org.apache.spark.sql.connector.write"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/spark/sql/connector/write/DataWriterFactory.html" title="interface in org.apache.spark.sql.connector.write"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/spark/sql/connector/write/DataWriter.html" target="_top">Frames</a></li>
<li><a href="DataWriter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.spark.sql.connector.write</div>
<h2 title="Interface DataWriter" class="title">Interface DataWriter&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd>AutoCloseable, java.io.Closeable</dd>
</dl>
<hr>
<br>
<pre>@Evolving
public interface <span class="typeNameLabel">DataWriter&lt;T&gt;</span>
extends java.io.Closeable</pre>
<div class="block">A data writer returned by <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriterFactory.html#createWriter-int-long-"><code>DataWriterFactory.createWriter(int, long)</code></a> and is
 responsible for writing data for an input RDD partition.
 <p>
 One Spark task has one exclusive data writer, so there is no thread-safe concern.
 <p>
 <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#write-T-"><code>write(Object)</code></a> is called for each record in the input RDD partition. If one record fails
 the <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#write-T-"><code>write(Object)</code></a>, <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#abort--"><code>abort()</code></a> is called afterwards and the remaining records will
 not be processed. If all records are successfully written, <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#commit--"><code>commit()</code></a> is called.
 <p>
 Once a data writer returns successfully from <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#commit--"><code>commit()</code></a> or <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#abort--"><code>abort()</code></a>, Spark will
 call <code>Closeable.close()</code> to let DataWriter doing resource cleanup. After calling <code>Closeable.close()</code>,
 its lifecycle is over and Spark will not use it again.
 <p>
 If this data writer succeeds(all records are successfully written and <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#commit--"><code>commit()</code></a>
 succeeds), a <a href="../../../../../../org/apache/spark/sql/connector/write/WriterCommitMessage.html" title="interface in org.apache.spark.sql.connector.write"><code>WriterCommitMessage</code></a> will be sent to the driver side and pass to
 <a href="../../../../../../org/apache/spark/sql/connector/write/BatchWrite.html#commit-org.apache.spark.sql.connector.write.WriterCommitMessage:A-"><code>BatchWrite.commit(WriterCommitMessage[])</code></a> with commit messages from other data
 writers. If this data writer fails(one record fails to write or <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#commit--"><code>commit()</code></a> fails), an
 exception will be sent to the driver side, and Spark may retry this writing task a few times.
 In each retry, <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriterFactory.html#createWriter-int-long-"><code>DataWriterFactory.createWriter(int, long)</code></a> will receive a
 different `taskId`. Spark will call <a href="../../../../../../org/apache/spark/sql/connector/write/BatchWrite.html#abort-org.apache.spark.sql.connector.write.WriterCommitMessage:A-"><code>BatchWrite.abort(WriterCommitMessage[])</code></a>
 when the configured number of retries is exhausted.
 <p>
 Besides the retry mechanism, Spark may launch speculative tasks if the existing writing task
 takes too long to finish. Different from retried tasks, which are launched one by one after the
 previous one fails, speculative tasks are running simultaneously. It's possible that one input
 RDD partition has multiple data writers with different `taskId` running at the same time,
 and data sources should guarantee that these data writers don't conflict and can work together.
 Implementations can coordinate with driver during <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#commit--"><code>commit()</code></a> to make sure only one of
 these data writers can commit successfully. Or implementations can allow all of them to commit
 successfully, and have a way to revert committed data writers without the commit message, because
 Spark only accepts the commit message that arrives first and ignore others.
 <p>
 Note that, Currently the type <code>T</code> can only be
 <code>InternalRow</code>.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.0.0</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#abort--">abort</a></span>()</code>
<div class="block">Aborts this writer if it is failed.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/spark/sql/connector/write/WriterCommitMessage.html" title="interface in org.apache.spark.sql.connector.write">WriterCommitMessage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#commit--">commit</a></span>()</code>
<div class="block">Commits this writer after all records are written successfully, returns a commit message which
 will be sent back to driver side and passed to
 <a href="../../../../../../org/apache/spark/sql/connector/write/BatchWrite.html#commit-org.apache.spark.sql.connector.write.WriterCommitMessage:A-"><code>BatchWrite.commit(WriterCommitMessage[])</code></a>.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>default <a href="../../../../../../org/apache/spark/sql/connector/metric/CustomTaskMetric.html" title="interface in org.apache.spark.sql.connector.metric">CustomTaskMetric</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#currentMetricsValues--">currentMetricsValues</a></span>()</code>
<div class="block">Returns an array of custom task metrics.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#write-T-">write</a></span>(<a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html" title="type parameter in DataWriter">T</a>&nbsp;record)</code>
<div class="block">Writes one record.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.io.Closeable">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;java.io.Closeable</h3>
<code>close</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="write-java.lang.Object-">
<!--   -->
</a><a name="write-T-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>void&nbsp;write(<a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html" title="type parameter in DataWriter">T</a>&nbsp;record)
    throws java.io.IOException</pre>
<div class="block">Writes one record.
 <p>
 If this method fails (by throwing an exception), <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#abort--"><code>abort()</code></a> will be called and this
 data writer is considered to have been failed.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if failure happens during disk/network IO like writing files.</dd>
</dl>
</li>
</ul>
<a name="commit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre><a href="../../../../../../org/apache/spark/sql/connector/write/WriterCommitMessage.html" title="interface in org.apache.spark.sql.connector.write">WriterCommitMessage</a>&nbsp;commit()
                    throws java.io.IOException</pre>
<div class="block">Commits this writer after all records are written successfully, returns a commit message which
 will be sent back to driver side and passed to
 <a href="../../../../../../org/apache/spark/sql/connector/write/BatchWrite.html#commit-org.apache.spark.sql.connector.write.WriterCommitMessage:A-"><code>BatchWrite.commit(WriterCommitMessage[])</code></a>.
 <p>
 The written data should only be visible to data source readers after
 <a href="../../../../../../org/apache/spark/sql/connector/write/BatchWrite.html#commit-org.apache.spark.sql.connector.write.WriterCommitMessage:A-"><code>BatchWrite.commit(WriterCommitMessage[])</code></a> succeeds, which means this method
 should still "hide" the written data and ask the <a href="../../../../../../org/apache/spark/sql/connector/write/BatchWrite.html" title="interface in org.apache.spark.sql.connector.write"><code>BatchWrite</code></a> at driver side to
 do the final commit via <a href="../../../../../../org/apache/spark/sql/connector/write/WriterCommitMessage.html" title="interface in org.apache.spark.sql.connector.write"><code>WriterCommitMessage</code></a>.
 <p>
 If this method fails (by throwing an exception), <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#abort--"><code>abort()</code></a> will be called and this
 data writer is considered to have been failed.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if failure happens during disk/network IO like writing files.</dd>
</dl>
</li>
</ul>
<a name="abort--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abort</h4>
<pre>void&nbsp;abort()
    throws java.io.IOException</pre>
<div class="block">Aborts this writer if it is failed. Implementations should clean up the data for already
 written records.
 <p>
 This method will only be called if there is one record failed to write, or <a href="../../../../../../org/apache/spark/sql/connector/write/DataWriter.html#commit--"><code>commit()</code></a>
 failed.
 <p>
 If this method fails(by throwing an exception), the underlying data source may have garbage
 that need to be cleaned by <a href="../../../../../../org/apache/spark/sql/connector/write/BatchWrite.html#abort-org.apache.spark.sql.connector.write.WriterCommitMessage:A-"><code>BatchWrite.abort(WriterCommitMessage[])</code></a> or manually,
 but these garbage should not be visible to data source readers.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if failure happens during disk/network IO like writing files.</dd>
</dl>
</li>
</ul>
<a name="currentMetricsValues--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>currentMetricsValues</h4>
<pre>default&nbsp;<a href="../../../../../../org/apache/spark/sql/connector/metric/CustomTaskMetric.html" title="interface in org.apache.spark.sql.connector.metric">CustomTaskMetric</a>[]&nbsp;currentMetricsValues()</pre>
<div class="block">Returns an array of custom task metrics. By default it returns empty array. Note that it is
 not recommended to put heavy logic in this method as it may affect writing performance.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/spark/sql/connector/write/BatchWrite.html" title="interface in org.apache.spark.sql.connector.write"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/spark/sql/connector/write/DataWriterFactory.html" title="interface in org.apache.spark.sql.connector.write"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/spark/sql/connector/write/DataWriter.html" target="_top">Frames</a></li>
<li><a href="DataWriter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<script defer="defer" type="text/javascript" src="../../../../../../lib/jquery.js"></script><script defer="defer" type="text/javascript" src="../../../../../../lib/api-javadocs.js"></script></body>
</html>
