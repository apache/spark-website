<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_352) on Thu Feb 16 09:26:36 UTC 2023 -->
<title>AggregateFunction (Spark 3.3.2 JavaDoc)</title>
<meta name="date" content="2023-02-16">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
    <!-- Matomo -->
    <script type="text/javascript">
        var _paq = window._paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(["disableCookies"]);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'matomo.php']);
            _paq.push(['setSiteId', '40']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AggregateFunction (Spark 3.3.2 JavaDoc)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/BoundFunction.html" title="interface in org.apache.spark.sql.connector.catalog.functions"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" target="_top">Frames</a></li>
<li><a href="AggregateFunction.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.spark.sql.connector.catalog.functions</div>
<h2 title="Interface AggregateFunction" class="title">Interface AggregateFunction&lt;S extends java.io.Serializable,R&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>S</code> - the JVM type for the aggregation's intermediate state; must be <code>Serializable</code></dd>
<dd><code>R</code> - the JVM type of result values</dd>
</dl>
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/BoundFunction.html" title="interface in org.apache.spark.sql.connector.catalog.functions">BoundFunction</a>, <a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/Function.html" title="interface in org.apache.spark.sql.connector.catalog.functions">Function</a>, java.io.Serializable</dd>
</dl>
<hr>
<br>
<pre>@Evolving
public interface <span class="typeNameLabel">AggregateFunction&lt;S extends java.io.Serializable,R&gt;</span>
extends <a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/BoundFunction.html" title="interface in org.apache.spark.sql.connector.catalog.functions">BoundFunction</a></pre>
<div class="block">Interface for a function that produces a result value by aggregating over multiple input rows.
 <p>
 For each input row, Spark will call the <a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html#update-S-org.apache.spark.sql.catalyst.InternalRow-"><code>update(S, org.apache.spark.sql.catalyst.InternalRow)</code></a> method which should evaluate the row
 and update the aggregation state. The JVM type of result values produced by
 <a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html#produceResult-S-"><code>produceResult(S)</code></a> must be the type used by Spark's
 InternalRow API for the <a href="../../../../../../../org/apache/spark/sql/types/DataType.html" title="class in org.apache.spark.sql.types"><code>SQL data type</code></a> returned by <a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/BoundFunction.html#resultType--"><code>BoundFunction.resultType()</code></a>.
 Please refer to class documentation of <a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/ScalarFunction.html" title="interface in org.apache.spark.sql.connector.catalog.functions"><code>ScalarFunction</code></a> for the mapping between
 <a href="../../../../../../../org/apache/spark/sql/types/DataType.html" title="class in org.apache.spark.sql.types"><code>DataType</code></a> and the JVM type.
 <p>
 All implementations must support partial aggregation by implementing merge so that Spark can
 partially aggregate and shuffle intermediate results, instead of shuffling all rows for an
 aggregate. This reduces the impact of data skew and the amount of data shuffled to produce the
 result.
 <p>
 Intermediate aggregation state must be <code>Serializable</code> so that state produced by parallel
 tasks can be serialized, shuffled, and then merged to produce a final result.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.2.0</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html#merge-S-S-">merge</a></span>(<a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a>&nbsp;leftState,
     <a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a>&nbsp;rightState)</code>
<div class="block">Merge two partial aggregation states.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html#newAggregationState--">newAggregationState</a></span>()</code>
<div class="block">Initialize state for an aggregation.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">R</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html#produceResult-S-">produceResult</a></span>(<a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a>&nbsp;state)</code>
<div class="block">Produce the aggregation result based on intermediate state.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html#update-S-org.apache.spark.sql.catalyst.InternalRow-">update</a></span>(<a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a>&nbsp;state,
      org.apache.spark.sql.catalyst.InternalRow&nbsp;input)</code>
<div class="block">Update the aggregation state with a new row.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.spark.sql.connector.catalog.functions.BoundFunction">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.spark.sql.connector.catalog.functions.<a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/BoundFunction.html" title="interface in org.apache.spark.sql.connector.catalog.functions">BoundFunction</a></h3>
<code><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/BoundFunction.html#canonicalName--">canonicalName</a>, <a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/BoundFunction.html#inputTypes--">inputTypes</a>, <a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/BoundFunction.html#isDeterministic--">isDeterministic</a>, <a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/BoundFunction.html#isResultNullable--">isResultNullable</a>, <a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/BoundFunction.html#resultType--">resultType</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.spark.sql.connector.catalog.functions.Function">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.spark.sql.connector.catalog.functions.<a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/Function.html" title="interface in org.apache.spark.sql.connector.catalog.functions">Function</a></h3>
<code><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/Function.html#name--">name</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="newAggregationState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newAggregationState</h4>
<pre><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a>&nbsp;newAggregationState()</pre>
<div class="block">Initialize state for an aggregation.
 <p>
 This method is called one or more times for every group of values to initialize intermediate
 aggregation state. More than one intermediate aggregation state variable may be used when the
 aggregation is run in parallel tasks.
 <p>
 Implementations that return null must support null state passed into all other methods.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a state instance or null</dd>
</dl>
</li>
</ul>
<a name="update-java.io.Serializable-org.apache.spark.sql.catalyst.InternalRow-">
<!--   -->
</a><a name="update-S-org.apache.spark.sql.catalyst.InternalRow-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a>&nbsp;update(<a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a>&nbsp;state,
         org.apache.spark.sql.catalyst.InternalRow&nbsp;input)</pre>
<div class="block">Update the aggregation state with a new row.
 <p>
 This is called for each row in a group to update an intermediate aggregation state.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - intermediate aggregation state</dd>
<dd><code>input</code> - an input row</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>updated aggregation state</dd>
</dl>
</li>
</ul>
<a name="merge-java.io.Serializable-java.io.Serializable-">
<!--   -->
</a><a name="merge-S-S-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>merge</h4>
<pre><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a>&nbsp;merge(<a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a>&nbsp;leftState,
        <a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a>&nbsp;rightState)</pre>
<div class="block">Merge two partial aggregation states.
 <p>
 This is called to merge intermediate aggregation states that were produced by parallel tasks.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>leftState</code> - intermediate aggregation state</dd>
<dd><code>rightState</code> - intermediate aggregation state</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>combined aggregation state</dd>
</dl>
</li>
</ul>
<a name="produceResult-java.io.Serializable-">
<!--   -->
</a><a name="produceResult-S-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>produceResult</h4>
<pre><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">R</a>&nbsp;produceResult(<a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" title="type parameter in AggregateFunction">S</a>&nbsp;state)</pre>
<div class="block">Produce the aggregation result based on intermediate state.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>state</code> - intermediate aggregation state</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a result value</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../../org/apache/spark/sql/connector/catalog/functions/BoundFunction.html" title="interface in org.apache.spark.sql.connector.catalog.functions"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?org/apache/spark/sql/connector/catalog/functions/AggregateFunction.html" target="_top">Frames</a></li>
<li><a href="AggregateFunction.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<script defer="defer" type="text/javascript" src="../../../../../../../lib/jquery.js"></script><script defer="defer" type="text/javascript" src="../../../../../../../lib/api-javadocs.js"></script></body>
</html>
