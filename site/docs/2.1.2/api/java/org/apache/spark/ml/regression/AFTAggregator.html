<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.7.0_151) on Mon Oct 02 14:47:23 PDT 2017 -->
<title>AFTAggregator (Spark 2.1.2 JavaDoc)</title>
<meta name="date" content="2017-10-02">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AFTAggregator (Spark 2.1.2 JavaDoc)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../org/apache/spark/ml/regression/AFTCostFun.html" title="class in org.apache.spark.ml.regression"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/spark/ml/regression/AFTAggregator.html" target="_top">Frames</a></li>
<li><a href="AFTAggregator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.spark.ml.regression</div>
<h2 title="Class AFTAggregator" class="title">Class AFTAggregator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>Object</li>
<li>
<ul class="inheritance">
<li>org.apache.spark.ml.regression.AFTAggregator</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Serializable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">AFTAggregator</span>
extends Object
implements scala.Serializable</pre>
<div class="block">AFTAggregator computes the gradient and loss for a AFT loss function,
 as used in AFT survival regression for samples in sparse or dense vector in an online fashion.
 <p>
 The loss function and likelihood function under the AFT model based on:
 Lawless, J. F., Statistical Models and Methods for Lifetime Data,
 New York: John Wiley &amp; Sons, Inc. 2003.
 <p>
 Two AFTAggregator can be merged together to have a summary of loss and gradient of
 the corresponding joint dataset.
 <p>
 Given the values of the covariates $x^{'}$, for random lifetime $t_{i}$ of subjects i = 1,..,n,
 with possible right-censoring, the likelihood function under the AFT model is given as
 <p>
 <blockquote>
    $$
    L(\beta,\sigma)=\prod_{i=1}^n[\frac{1}{\sigma}f_{0}
      (\frac{\log{t_{i}}-x^{'}\beta}{\sigma})]^{\delta_{i}}S_{0}
    (\frac{\log{t_{i}}-x^{'}\beta}{\sigma})^{1-\delta_{i}}
    $$
 </blockquote>
 <p>
 Where $\delta_{i}$ is the indicator of the event has occurred i.e. uncensored or not.
 Using $\epsilon_{i}=\frac{\log{t_{i}}-x^{'}\beta}{\sigma}$, the log-likelihood function
 assumes the form
 <p>
 <blockquote>
    $$
    \iota(\beta,\sigma)=\sum_{i=1}^{n}[-\delta_{i}\log\sigma+
    \delta_{i}\log{f_{0}}(\epsilon_{i})+(1-\delta_{i})\log{S_{0}(\epsilon_{i})}]
    $$
 </blockquote>
 Where $S_{0}(\epsilon_{i})$ is the baseline survivor function,
 and $f_{0}(\epsilon_{i})$ is corresponding density function.
 <p>
 The most commonly used log-linear survival regression method is based on the Weibull
 distribution of the survival time. The Weibull distribution for lifetime corresponding
 to extreme value distribution for log of the lifetime,
 and the $S_{0}(\epsilon)$ function is
 <p>
 <blockquote>
    $$
    S_{0}(\epsilon_{i})=\exp(-e^{\epsilon_{i}})
    $$
 </blockquote>
 <p>
 and the $f_{0}(\epsilon_{i})$ function is
 <p>
 <blockquote>
    $$
    f_{0}(\epsilon_{i})=e^{\epsilon_{i}}\exp(-e^{\epsilon_{i}})
    $$
 </blockquote>
 <p>
 The log-likelihood function for Weibull distribution of lifetime is
 <p>
 <blockquote>
    $$
    \iota(\beta,\sigma)=
    -\sum_{i=1}^n[\delta_{i}\log\sigma-\delta_{i}\epsilon_{i}+e^{\epsilon_{i}}]
    $$
 </blockquote>
 <p>
 Due to minimizing the negative log-likelihood equivalent to maximum a posteriori probability,
 the loss function we use to optimize is $-\iota(\beta,\sigma)$.
 The gradient functions for $\beta$ and $\log\sigma$ respectively are
 <p>
 <blockquote>
    $$
    \frac{\partial (-\iota)}{\partial \beta}=
    \sum_{1=1}^{n}[\delta_{i}-e^{\epsilon_{i}}]\frac{x_{i}}{\sigma} \\
 <p>
    \frac{\partial (-\iota)}{\partial (\log\sigma)}=
    \sum_{i=1}^{n}[\delta_{i}+(\delta_{i}-e^{\epsilon_{i}})\epsilon_{i}]
    $$
 </blockquote>
 <p>
 param:  bcParameters The broadcasted value includes three part: The log of scale parameter,
                     the intercept and regression coefficients corresponding to the features.
 param:  fitIntercept Whether to fit an intercept term.
 param:  bcFeaturesStd The broadcast standard deviation values of the features.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../serialized-form.html#org.apache.spark.ml.regression.AFTAggregator">Serialized Form</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html#AFTAggregator(org.apache.spark.broadcast.Broadcast,%20boolean,%20org.apache.spark.broadcast.Broadcast)">AFTAggregator</a></strong>(<a href="../../../../../org/apache/spark/broadcast/Broadcast.html" title="class in org.apache.spark.broadcast">Broadcast</a>&lt;breeze.linalg.DenseVector&lt;Object&gt;&gt;&nbsp;bcParameters,
             boolean&nbsp;fitIntercept,
             <a href="../../../../../org/apache/spark/broadcast/Broadcast.html" title="class in org.apache.spark.broadcast">Broadcast</a>&lt;double[]&gt;&nbsp;bcFeaturesStd)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html" title="class in org.apache.spark.ml.regression">AFTAggregator</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html#add(org.apache.spark.ml.regression.AFTPoint)">add</a></strong>(org.apache.spark.ml.regression.AFTPoint&nbsp;data)</code>
<div class="block">Add a new training data to this AFTAggregator, and update the loss and gradient
 of the objective function.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html#count()">count</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>breeze.linalg.DenseVector&lt;Object&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html#gradient()">gradient</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html#loss()">loss</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html" title="class in org.apache.spark.ml.regression">AFTAggregator</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html#merge(org.apache.spark.ml.regression.AFTAggregator)">merge</a></strong>(<a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html" title="class in org.apache.spark.ml.regression">AFTAggregator</a>&nbsp;other)</code>
<div class="block">Merge another AFTAggregator, and update the loss and gradient
 of the objective function.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AFTAggregator(org.apache.spark.broadcast.Broadcast, boolean, org.apache.spark.broadcast.Broadcast)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AFTAggregator</h4>
<pre>public&nbsp;AFTAggregator(<a href="../../../../../org/apache/spark/broadcast/Broadcast.html" title="class in org.apache.spark.broadcast">Broadcast</a>&lt;breeze.linalg.DenseVector&lt;Object&gt;&gt;&nbsp;bcParameters,
             boolean&nbsp;fitIntercept,
             <a href="../../../../../org/apache/spark/broadcast/Broadcast.html" title="class in org.apache.spark.broadcast">Broadcast</a>&lt;double[]&gt;&nbsp;bcFeaturesStd)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="count()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>count</h4>
<pre>public&nbsp;long&nbsp;count()</pre>
</li>
</ul>
<a name="loss()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loss</h4>
<pre>public&nbsp;double&nbsp;loss()</pre>
</li>
</ul>
<a name="gradient()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gradient</h4>
<pre>public&nbsp;breeze.linalg.DenseVector&lt;Object&gt;&nbsp;gradient()</pre>
</li>
</ul>
<a name="add(org.apache.spark.ml.regression.AFTPoint)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html" title="class in org.apache.spark.ml.regression">AFTAggregator</a>&nbsp;add(org.apache.spark.ml.regression.AFTPoint&nbsp;data)</pre>
<div class="block">Add a new training data to this AFTAggregator, and update the loss and gradient
 of the objective function.
 <p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - The AFTPoint representation for one data point to be added into this aggregator.</dd>
<dt><span class="strong">Returns:</span></dt><dd>This AFTAggregator object.</dd></dl>
</li>
</ul>
<a name="merge(org.apache.spark.ml.regression.AFTAggregator)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>merge</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html" title="class in org.apache.spark.ml.regression">AFTAggregator</a>&nbsp;merge(<a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html" title="class in org.apache.spark.ml.regression">AFTAggregator</a>&nbsp;other)</pre>
<div class="block">Merge another AFTAggregator, and update the loss and gradient
 of the objective function.
 (Note that it's in place merging; as a result, <code>this</code> object will be modified.)
 <p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>other</code> - The other AFTAggregator to be merged.</dd>
<dt><span class="strong">Returns:</span></dt><dd>This AFTAggregator object.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../org/apache/spark/ml/regression/AFTCostFun.html" title="class in org.apache.spark.ml.regression"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/spark/ml/regression/AFTAggregator.html" target="_top">Frames</a></li>
<li><a href="AFTAggregator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<script defer="defer" type="text/javascript" src="../../../../../lib/jquery.js"></script><script defer="defer" type="text/javascript" src="../../../../../lib/api-javadocs.js"></script></body>
</html>
