
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>pyspark.ml.fpm &#8212; PySpark master documentation</title>
    
    <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" href="../../../_static/styles/pydata-sphinx-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/pyspark.css" />
    
    <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    <link rel="canonical" href="https://spark.apache.org/docs/latest/api/python/_modules/pyspark/ml/fpm.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../../index.html">
  <img src="../../../_static/spark-logo-reverse.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../index.html">
  Overview
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../getting_started/index.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../user_guide/index.html">
  User Guides
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../reference/index.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../development/index.html">
  Development
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../migration_guide/index.html">
  Migration Guides
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <!--
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to You under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<div id="version-button" class="dropdown">
    <button type="button" class="btn btn-secondary btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        master
        <span class="caret"></span>
    </button>
    <div id="version_switcher" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<script type="text/javascript">
// Function to construct the target URL from the JSON components
function buildURL(entry) {
    var template = "https://spark.apache.org/docs/{version}/api/python/index.html";  // supplied by jinja
    template = template.replace("{version}", entry.version);
    return template;
}

// Function to check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "_modules/pyspark/ml/fpm.html",
          otherDocsHomepage = event.target.getAttribute("href");
    let tryUrl = `${otherDocsHomepage}${currentFilePath}`;
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    return false;
}

// Function to populate the version switcher
(function () {
    // get JSON config
    $.getJSON("https://spark.apache.org/static/versions.json", function(data, textStatus, jqXHR) {
        // create the nodes first (before AJAX calls) to ensure the order is
        // correct (for now, links will go to doc version homepage)
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // construct the appropriate URL, and add it to the dropdown
            entry.url = buildURL(entry);
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.setAttribute("href", `${entry.url}`);
            node.textContent = `${entry.name}`;
            node.onclick = checkPageExistsAndRedirect;
            $("#version_switcher").append(node);
        });
    });
})();
</script>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <h1>Source code for pyspark.ml.fpm</h1><div class="highlight"><pre>
<span></span><span class="c1">#</span>
<span class="c1"># Licensed to the Apache Software Foundation (ASF) under one or more</span>
<span class="c1"># contributor license agreements.  See the NOTICE file distributed with</span>
<span class="c1"># this work for additional information regarding copyright ownership.</span>
<span class="c1"># The ASF licenses this file to You under the Apache License, Version 2.0</span>
<span class="c1"># (the &quot;License&quot;); you may not use this file except in compliance with</span>
<span class="c1"># the License.  You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#    http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="c1">#</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">TYPE_CHECKING</span>

<span class="kn">from</span> <span class="nn">pyspark</span> <span class="kn">import</span> <span class="n">keyword_only</span><span class="p">,</span> <span class="n">since</span>
<span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">DataFrame</span>
<span class="kn">from</span> <span class="nn">pyspark.ml.util</span> <span class="kn">import</span> <span class="n">JavaMLWritable</span><span class="p">,</span> <span class="n">JavaMLReadable</span>
<span class="kn">from</span> <span class="nn">pyspark.ml.wrapper</span> <span class="kn">import</span> <span class="n">JavaEstimator</span><span class="p">,</span> <span class="n">JavaModel</span><span class="p">,</span> <span class="n">JavaParams</span>
<span class="kn">from</span> <span class="nn">pyspark.ml.param.shared</span> <span class="kn">import</span> <span class="n">HasPredictionCol</span><span class="p">,</span> <span class="n">Param</span><span class="p">,</span> <span class="n">TypeConverters</span><span class="p">,</span> <span class="n">Params</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">py4j.java_gateway</span> <span class="kn">import</span> <span class="n">JavaObject</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;FPGrowth&quot;</span><span class="p">,</span> <span class="s2">&quot;FPGrowthModel&quot;</span><span class="p">,</span> <span class="s2">&quot;PrefixSpan&quot;</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">_FPGrowthParams</span><span class="p">(</span><span class="n">HasPredictionCol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Params for :py:class:`FPGrowth` and :py:class:`FPGrowthModel`.</span>

<span class="sd">    .. versionadded:: 3.0.0</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">itemsCol</span><span class="p">:</span> <span class="n">Param</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span>
        <span class="n">Params</span><span class="o">.</span><span class="n">_dummy</span><span class="p">(),</span> <span class="s2">&quot;itemsCol&quot;</span><span class="p">,</span> <span class="s2">&quot;items column name&quot;</span><span class="p">,</span> <span class="n">typeConverter</span><span class="o">=</span><span class="n">TypeConverters</span><span class="o">.</span><span class="n">toString</span>
    <span class="p">)</span>
    <span class="n">minSupport</span><span class="p">:</span> <span class="n">Param</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span>
        <span class="n">Params</span><span class="o">.</span><span class="n">_dummy</span><span class="p">(),</span>
        <span class="s2">&quot;minSupport&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Minimal support level of the frequent pattern. [0.0, 1.0]. &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;Any pattern that appears more than (minSupport * size-of-the-dataset) &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;times will be output in the frequent itemsets.&quot;</span><span class="p">,</span>
        <span class="n">typeConverter</span><span class="o">=</span><span class="n">TypeConverters</span><span class="o">.</span><span class="n">toFloat</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">numPartitions</span><span class="p">:</span> <span class="n">Param</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span>
        <span class="n">Params</span><span class="o">.</span><span class="n">_dummy</span><span class="p">(),</span>
        <span class="s2">&quot;numPartitions&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Number of partitions (at least 1) used by parallel FP-growth. &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;By default the param is not set, &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;and partition number of the input dataset is used.&quot;</span><span class="p">,</span>
        <span class="n">typeConverter</span><span class="o">=</span><span class="n">TypeConverters</span><span class="o">.</span><span class="n">toInt</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">minConfidence</span><span class="p">:</span> <span class="n">Param</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span>
        <span class="n">Params</span><span class="o">.</span><span class="n">_dummy</span><span class="p">(),</span>
        <span class="s2">&quot;minConfidence&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Minimal confidence for generating Association Rule. [0.0, 1.0]. &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;minConfidence will not affect the mining for frequent itemsets, &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;but will affect the association rules generation.&quot;</span><span class="p">,</span>
        <span class="n">typeConverter</span><span class="o">=</span><span class="n">TypeConverters</span><span class="o">.</span><span class="n">toFloat</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">_FPGrowthParams</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setDefault</span><span class="p">(</span>
            <span class="n">minSupport</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">minConfidence</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">itemsCol</span><span class="o">=</span><span class="s2">&quot;items&quot;</span><span class="p">,</span> <span class="n">predictionCol</span><span class="o">=</span><span class="s2">&quot;prediction&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">getItemsCol</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the value of itemsCol or its default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getOrDefault</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemsCol</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getMinSupport</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the value of minSupport or its default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getOrDefault</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minSupport</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getNumPartitions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the value of :py:attr:`numPartitions` or its default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getOrDefault</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">numPartitions</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getMinConfidence</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the value of minConfidence or its default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getOrDefault</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minConfidence</span><span class="p">)</span>


<div class="viewcode-block" id="FPGrowthModel"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.FPGrowthModel.html#pyspark.ml.fpm.FPGrowthModel">[docs]</a><span class="k">class</span> <span class="nc">FPGrowthModel</span><span class="p">(</span><span class="n">JavaModel</span><span class="p">,</span> <span class="n">_FPGrowthParams</span><span class="p">,</span> <span class="n">JavaMLWritable</span><span class="p">,</span> <span class="n">JavaMLReadable</span><span class="p">[</span><span class="s2">&quot;FPGrowthModel&quot;</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Model fitted by FPGrowth.</span>

<span class="sd">    .. versionadded:: 2.2.0</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="FPGrowthModel.setItemsCol"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.FPGrowthModel.html#pyspark.ml.fpm.FPGrowthModel.setItemsCol">[docs]</a>    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;3.0.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setItemsCol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FPGrowthModel&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of :py:attr:`itemsCol`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">itemsCol</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="FPGrowthModel.setMinConfidence"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.FPGrowthModel.html#pyspark.ml.fpm.FPGrowthModel.setMinConfidence">[docs]</a>    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;3.0.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setMinConfidence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FPGrowthModel&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of :py:attr:`minConfidence`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">minConfidence</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="FPGrowthModel.setPredictionCol"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.FPGrowthModel.html#pyspark.ml.fpm.FPGrowthModel.setPredictionCol">[docs]</a>    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;3.0.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setPredictionCol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FPGrowthModel&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of :py:attr:`predictionCol`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">predictionCol</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;2.2.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">freqItemsets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        DataFrame with two columns:</span>
<span class="sd">        * `items` - Itemset of the same type as the input column.</span>
<span class="sd">        * `freq`  - Frequency of the itemset (`LongType`).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_java</span><span class="p">(</span><span class="s2">&quot;freqItemsets&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;2.2.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">associationRules</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        DataFrame with four columns:</span>
<span class="sd">        * `antecedent`  - Array of the same type as the input column.</span>
<span class="sd">        * `consequent`  - Array of the same type as the input column.</span>
<span class="sd">        * `confidence`  - Confidence for the rule (`DoubleType`).</span>
<span class="sd">        * `lift`        - Lift for the rule (`DoubleType`).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call_java</span><span class="p">(</span><span class="s2">&quot;associationRules&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="FPGrowth"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.FPGrowth.html#pyspark.ml.fpm.FPGrowth">[docs]</a><span class="k">class</span> <span class="nc">FPGrowth</span><span class="p">(</span>
    <span class="n">JavaEstimator</span><span class="p">[</span><span class="n">FPGrowthModel</span><span class="p">],</span> <span class="n">_FPGrowthParams</span><span class="p">,</span> <span class="n">JavaMLWritable</span><span class="p">,</span> <span class="n">JavaMLReadable</span><span class="p">[</span><span class="s2">&quot;FPGrowth&quot;</span><span class="p">]</span>
<span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A parallel FP-growth algorithm to mine frequent itemsets.</span>

<span class="sd">    .. versionadded:: 2.2.0</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>

<span class="sd">    The algorithm is described in</span>
<span class="sd">    Li et al., PFP: Parallel FP-Growth for Query Recommendation [1]_.</span>
<span class="sd">    PFP distributes computation in such a way that each worker executes an</span>
<span class="sd">    independent group of mining tasks. The FP-Growth algorithm is described in</span>
<span class="sd">    Han et al., Mining frequent patterns without candidate generation [2]_</span>

<span class="sd">    NULL values in the feature column are ignored during `fit()`.</span>

<span class="sd">    Internally `transform` `collects` and `broadcasts` association rules.</span>


<span class="sd">    .. [1] Haoyuan Li, Yi Wang, Dong Zhang, Ming Zhang, and Edward Y. Chang. 2008.</span>
<span class="sd">        Pfp: parallel fp-growth for query recommendation.</span>
<span class="sd">        In Proceedings of the 2008 ACM conference on Recommender systems (RecSys &#39;08).</span>
<span class="sd">        Association for Computing Machinery, New York, NY, USA, 107-114.</span>
<span class="sd">        DOI: https://doi.org/10.1145/1454008.1454027</span>
<span class="sd">    .. [2] Jiawei Han, Jian Pei, and Yiwen Yin. 2000.</span>
<span class="sd">        Mining frequent patterns without candidate generation.</span>
<span class="sd">        SIGMOD Rec. 29, 2 (June 2000), 1-12.</span>
<span class="sd">        DOI: https://doi.org/10.1145/335191.335372</span>


<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from pyspark.sql.functions import split</span>
<span class="sd">    &gt;&gt;&gt; data = (spark.read</span>
<span class="sd">    ...     .text(&quot;data/mllib/sample_fpgrowth.txt&quot;)</span>
<span class="sd">    ...     .select(split(&quot;value&quot;, &quot;\s+&quot;).alias(&quot;items&quot;)))</span>
<span class="sd">    &gt;&gt;&gt; data.show(truncate=False)</span>
<span class="sd">    +------------------------+</span>
<span class="sd">    |items                   |</span>
<span class="sd">    +------------------------+</span>
<span class="sd">    |[r, z, h, k, p]         |</span>
<span class="sd">    |[z, y, x, w, v, u, t, s]|</span>
<span class="sd">    |[s, x, o, n, r]         |</span>
<span class="sd">    |[x, z, y, m, t, s, q, e]|</span>
<span class="sd">    |[z]                     |</span>
<span class="sd">    |[x, z, y, r, q, t, p]   |</span>
<span class="sd">    +------------------------+</span>
<span class="sd">    ...</span>
<span class="sd">    &gt;&gt;&gt; fp = FPGrowth(minSupport=0.2, minConfidence=0.7)</span>
<span class="sd">    &gt;&gt;&gt; fpm = fp.fit(data)</span>
<span class="sd">    &gt;&gt;&gt; fpm.setPredictionCol(&quot;newPrediction&quot;)</span>
<span class="sd">    FPGrowthModel...</span>
<span class="sd">    &gt;&gt;&gt; fpm.freqItemsets.sort(&quot;items&quot;).show(5)</span>
<span class="sd">    +---------+----+</span>
<span class="sd">    |    items|freq|</span>
<span class="sd">    +---------+----+</span>
<span class="sd">    |      [p]|   2|</span>
<span class="sd">    |   [p, r]|   2|</span>
<span class="sd">    |[p, r, z]|   2|</span>
<span class="sd">    |   [p, z]|   2|</span>
<span class="sd">    |      [q]|   2|</span>
<span class="sd">    +---------+----+</span>
<span class="sd">    only showing top 5 rows</span>
<span class="sd">    ...</span>
<span class="sd">    &gt;&gt;&gt; fpm.associationRules.sort(&quot;antecedent&quot;, &quot;consequent&quot;).show(5)</span>
<span class="sd">    +----------+----------+----------+----+------------------+</span>
<span class="sd">    |antecedent|consequent|confidence|lift|           support|</span>
<span class="sd">    +----------+----------+----------+----+------------------+</span>
<span class="sd">    |       [p]|       [r]|       1.0| 2.0|0.3333333333333333|</span>
<span class="sd">    |       [p]|       [z]|       1.0| 1.2|0.3333333333333333|</span>
<span class="sd">    |    [p, r]|       [z]|       1.0| 1.2|0.3333333333333333|</span>
<span class="sd">    |    [p, z]|       [r]|       1.0| 2.0|0.3333333333333333|</span>
<span class="sd">    |       [q]|       [t]|       1.0| 2.0|0.3333333333333333|</span>
<span class="sd">    +----------+----------+----------+----+------------------+</span>
<span class="sd">    only showing top 5 rows</span>
<span class="sd">    ...</span>
<span class="sd">    &gt;&gt;&gt; new_data = spark.createDataFrame([([&quot;t&quot;, &quot;s&quot;], )], [&quot;items&quot;])</span>
<span class="sd">    &gt;&gt;&gt; sorted(fpm.transform(new_data).first().newPrediction)</span>
<span class="sd">    [&#39;x&#39;, &#39;y&#39;, &#39;z&#39;]</span>
<span class="sd">    &gt;&gt;&gt; model_path = temp_path + &quot;/fpm_model&quot;</span>
<span class="sd">    &gt;&gt;&gt; fpm.save(model_path)</span>
<span class="sd">    &gt;&gt;&gt; model2 = FPGrowthModel.load(model_path)</span>
<span class="sd">    &gt;&gt;&gt; fpm.transform(data).take(1) == model2.transform(data).take(1)</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_input_kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>

    <span class="nd">@keyword_only</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">minSupport</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span>
        <span class="n">minConfidence</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
        <span class="n">itemsCol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;items&quot;</span><span class="p">,</span>
        <span class="n">predictionCol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;prediction&quot;</span><span class="p">,</span>
        <span class="n">numPartitions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        __init__(self, \\*, minSupport=0.3, minConfidence=0.8, itemsCol=&quot;items&quot;, \</span>
<span class="sd">                 predictionCol=&quot;prediction&quot;, numPartitions=None)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FPGrowth</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_java_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_java_obj</span><span class="p">(</span><span class="s2">&quot;org.apache.spark.ml.fpm.FPGrowth&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">uid</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setParams</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="FPGrowth.setParams"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.FPGrowth.html#pyspark.ml.fpm.FPGrowth.setParams">[docs]</a>    <span class="nd">@keyword_only</span>
    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;2.2.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setParams</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">minSupport</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span>
        <span class="n">minConfidence</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
        <span class="n">itemsCol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;items&quot;</span><span class="p">,</span>
        <span class="n">predictionCol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;prediction&quot;</span><span class="p">,</span>
        <span class="n">numPartitions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FPGrowth&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        setParams(self, \\*, minSupport=0.3, minConfidence=0.8, itemsCol=&quot;items&quot;, \</span>
<span class="sd">                  predictionCol=&quot;prediction&quot;, numPartitions=None)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_kwargs</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="FPGrowth.setItemsCol"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.FPGrowth.html#pyspark.ml.fpm.FPGrowth.setItemsCol">[docs]</a>    <span class="k">def</span> <span class="nf">setItemsCol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FPGrowth&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of :py:attr:`itemsCol`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">itemsCol</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="FPGrowth.setMinSupport"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.FPGrowth.html#pyspark.ml.fpm.FPGrowth.setMinSupport">[docs]</a>    <span class="k">def</span> <span class="nf">setMinSupport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FPGrowth&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of :py:attr:`minSupport`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">minSupport</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="FPGrowth.setNumPartitions"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.FPGrowth.html#pyspark.ml.fpm.FPGrowth.setNumPartitions">[docs]</a>    <span class="k">def</span> <span class="nf">setNumPartitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FPGrowth&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of :py:attr:`numPartitions`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">numPartitions</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="FPGrowth.setMinConfidence"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.FPGrowth.html#pyspark.ml.fpm.FPGrowth.setMinConfidence">[docs]</a>    <span class="k">def</span> <span class="nf">setMinConfidence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FPGrowth&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of :py:attr:`minConfidence`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">minConfidence</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="FPGrowth.setPredictionCol"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.FPGrowth.html#pyspark.ml.fpm.FPGrowth.setPredictionCol">[docs]</a>    <span class="k">def</span> <span class="nf">setPredictionCol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;FPGrowth&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of :py:attr:`predictionCol`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">predictionCol</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_create_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">java_model</span><span class="p">:</span> <span class="s2">&quot;JavaObject&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FPGrowthModel</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">FPGrowthModel</span><span class="p">(</span><span class="n">java_model</span><span class="p">)</span></div>


<div class="viewcode-block" id="PrefixSpan"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.PrefixSpan.html#pyspark.ml.fpm.PrefixSpan">[docs]</a><span class="k">class</span> <span class="nc">PrefixSpan</span><span class="p">(</span><span class="n">JavaParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A parallel PrefixSpan algorithm to mine frequent sequential patterns.</span>
<span class="sd">    The PrefixSpan algorithm is described in J. Pei, et al., PrefixSpan: Mining Sequential Patterns</span>
<span class="sd">    Efficiently by Prefix-Projected Pattern Growth</span>
<span class="sd">    (see `here &lt;https://doi.org/10.1109/ICDE.2001.914830&gt;`_).</span>
<span class="sd">    This class is not yet an Estimator/Transformer, use :py:func:`findFrequentSequentialPatterns`</span>
<span class="sd">    method to run the PrefixSpan algorithm.</span>

<span class="sd">    .. versionadded:: 2.4.0</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    See `Sequential Pattern Mining (Wikipedia) \</span>
<span class="sd">      &lt;https://en.wikipedia.org/wiki/Sequential_Pattern_Mining&gt;`_</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from pyspark.ml.fpm import PrefixSpan</span>
<span class="sd">    &gt;&gt;&gt; from pyspark.sql import Row</span>
<span class="sd">    &gt;&gt;&gt; df = sc.parallelize([Row(sequence=[[1, 2], [3]]),</span>
<span class="sd">    ...                      Row(sequence=[[1], [3, 2], [1, 2]]),</span>
<span class="sd">    ...                      Row(sequence=[[1, 2], [5]]),</span>
<span class="sd">    ...                      Row(sequence=[[6]])]).toDF()</span>
<span class="sd">    &gt;&gt;&gt; prefixSpan = PrefixSpan()</span>
<span class="sd">    &gt;&gt;&gt; prefixSpan.getMaxLocalProjDBSize()</span>
<span class="sd">    32000000</span>
<span class="sd">    &gt;&gt;&gt; prefixSpan.getSequenceCol()</span>
<span class="sd">    &#39;sequence&#39;</span>
<span class="sd">    &gt;&gt;&gt; prefixSpan.setMinSupport(0.5)</span>
<span class="sd">    PrefixSpan...</span>
<span class="sd">    &gt;&gt;&gt; prefixSpan.setMaxPatternLength(5)</span>
<span class="sd">    PrefixSpan...</span>
<span class="sd">    &gt;&gt;&gt; prefixSpan.findFrequentSequentialPatterns(df).sort(&quot;sequence&quot;).show(truncate=False)</span>
<span class="sd">    +----------+----+</span>
<span class="sd">    |sequence  |freq|</span>
<span class="sd">    +----------+----+</span>
<span class="sd">    |[[1]]     |3   |</span>
<span class="sd">    |[[1], [3]]|2   |</span>
<span class="sd">    |[[2]]     |3   |</span>
<span class="sd">    |[[2, 1]]  |3   |</span>
<span class="sd">    |[[3]]     |2   |</span>
<span class="sd">    +----------+----+</span>
<span class="sd">    ...</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_input_kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>

    <span class="n">minSupport</span><span class="p">:</span> <span class="n">Param</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span>
        <span class="n">Params</span><span class="o">.</span><span class="n">_dummy</span><span class="p">(),</span>
        <span class="s2">&quot;minSupport&quot;</span><span class="p">,</span>
        <span class="s2">&quot;The minimal support level of the &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;sequential pattern. Sequential pattern that appears more than &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;(minSupport * size-of-the-dataset) times will be output. Must be &gt;= 0.&quot;</span><span class="p">,</span>
        <span class="n">typeConverter</span><span class="o">=</span><span class="n">TypeConverters</span><span class="o">.</span><span class="n">toFloat</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">maxPatternLength</span><span class="p">:</span> <span class="n">Param</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span>
        <span class="n">Params</span><span class="o">.</span><span class="n">_dummy</span><span class="p">(),</span>
        <span class="s2">&quot;maxPatternLength&quot;</span><span class="p">,</span>
        <span class="s2">&quot;The maximal length of the sequential pattern. Must be &gt; 0.&quot;</span><span class="p">,</span>
        <span class="n">typeConverter</span><span class="o">=</span><span class="n">TypeConverters</span><span class="o">.</span><span class="n">toInt</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">maxLocalProjDBSize</span><span class="p">:</span> <span class="n">Param</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span>
        <span class="n">Params</span><span class="o">.</span><span class="n">_dummy</span><span class="p">(),</span>
        <span class="s2">&quot;maxLocalProjDBSize&quot;</span><span class="p">,</span>
        <span class="s2">&quot;The maximum number of items (including delimiters used in the &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;internal storage format) allowed in a projected database before &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;local processing. If a projected database exceeds this size, &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;another iteration of distributed prefix growth is run. &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;Must be &gt; 0.&quot;</span><span class="p">,</span>
        <span class="n">typeConverter</span><span class="o">=</span><span class="n">TypeConverters</span><span class="o">.</span><span class="n">toInt</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">sequenceCol</span><span class="p">:</span> <span class="n">Param</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Param</span><span class="p">(</span>
        <span class="n">Params</span><span class="o">.</span><span class="n">_dummy</span><span class="p">(),</span>
        <span class="s2">&quot;sequenceCol&quot;</span><span class="p">,</span>
        <span class="s2">&quot;The name of the sequence column in &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;dataset, rows with nulls in this column are ignored.&quot;</span><span class="p">,</span>
        <span class="n">typeConverter</span><span class="o">=</span><span class="n">TypeConverters</span><span class="o">.</span><span class="n">toString</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@keyword_only</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">minSupport</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="n">maxPatternLength</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">maxLocalProjDBSize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">32000000</span><span class="p">,</span>
        <span class="n">sequenceCol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sequence&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        __init__(self, \\*, minSupport=0.1, maxPatternLength=10, maxLocalProjDBSize=32000000, \</span>
<span class="sd">                 sequenceCol=&quot;sequence&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PrefixSpan</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_java_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_java_obj</span><span class="p">(</span><span class="s2">&quot;org.apache.spark.ml.fpm.PrefixSpan&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">uid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setDefault</span><span class="p">(</span>
            <span class="n">minSupport</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">maxPatternLength</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">maxLocalProjDBSize</span><span class="o">=</span><span class="mi">32000000</span><span class="p">,</span> <span class="n">sequenceCol</span><span class="o">=</span><span class="s2">&quot;sequence&quot;</span>
        <span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_kwargs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setParams</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="PrefixSpan.setParams"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.PrefixSpan.html#pyspark.ml.fpm.PrefixSpan.setParams">[docs]</a>    <span class="nd">@keyword_only</span>
    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;2.4.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setParams</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">minSupport</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="n">maxPatternLength</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">maxLocalProjDBSize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">32000000</span><span class="p">,</span>
        <span class="n">sequenceCol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sequence&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PrefixSpan&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        setParams(self, \\*, minSupport=0.1, maxPatternLength=10, maxLocalProjDBSize=32000000, \</span>
<span class="sd">                  sequenceCol=&quot;sequence&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_kwargs</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="PrefixSpan.setMinSupport"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.PrefixSpan.html#pyspark.ml.fpm.PrefixSpan.setMinSupport">[docs]</a>    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;3.0.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setMinSupport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PrefixSpan&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of :py:attr:`minSupport`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">minSupport</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="PrefixSpan.getMinSupport"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.PrefixSpan.html#pyspark.ml.fpm.PrefixSpan.getMinSupport">[docs]</a>    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;3.0.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">getMinSupport</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the value of minSupport or its default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getOrDefault</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minSupport</span><span class="p">)</span></div>

<div class="viewcode-block" id="PrefixSpan.setMaxPatternLength"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.PrefixSpan.html#pyspark.ml.fpm.PrefixSpan.setMaxPatternLength">[docs]</a>    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;3.0.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setMaxPatternLength</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PrefixSpan&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of :py:attr:`maxPatternLength`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">maxPatternLength</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="PrefixSpan.getMaxPatternLength"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.PrefixSpan.html#pyspark.ml.fpm.PrefixSpan.getMaxPatternLength">[docs]</a>    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;3.0.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">getMaxPatternLength</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the value of maxPatternLength or its default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getOrDefault</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxPatternLength</span><span class="p">)</span></div>

<div class="viewcode-block" id="PrefixSpan.setMaxLocalProjDBSize"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.PrefixSpan.html#pyspark.ml.fpm.PrefixSpan.setMaxLocalProjDBSize">[docs]</a>    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;3.0.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setMaxLocalProjDBSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PrefixSpan&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of :py:attr:`maxLocalProjDBSize`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">maxLocalProjDBSize</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="PrefixSpan.getMaxLocalProjDBSize"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.PrefixSpan.html#pyspark.ml.fpm.PrefixSpan.getMaxLocalProjDBSize">[docs]</a>    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;3.0.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">getMaxLocalProjDBSize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the value of maxLocalProjDBSize or its default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getOrDefault</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxLocalProjDBSize</span><span class="p">)</span></div>

<div class="viewcode-block" id="PrefixSpan.setSequenceCol"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.PrefixSpan.html#pyspark.ml.fpm.PrefixSpan.setSequenceCol">[docs]</a>    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;3.0.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setSequenceCol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PrefixSpan&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of :py:attr:`sequenceCol`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set</span><span class="p">(</span><span class="n">sequenceCol</span><span class="o">=</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="PrefixSpan.getSequenceCol"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.PrefixSpan.html#pyspark.ml.fpm.PrefixSpan.getSequenceCol">[docs]</a>    <span class="nd">@since</span><span class="p">(</span><span class="s2">&quot;3.0.0&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">getSequenceCol</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the value of sequenceCol or its default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getOrDefault</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sequenceCol</span><span class="p">)</span></div>

<div class="viewcode-block" id="PrefixSpan.findFrequentSequentialPatterns"><a class="viewcode-back" href="../../../reference/api/pyspark.ml.fpm.PrefixSpan.html#pyspark.ml.fpm.PrefixSpan.findFrequentSequentialPatterns">[docs]</a>    <span class="k">def</span> <span class="nf">findFrequentSequentialPatterns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">:</span> <span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Finds the complete set of frequent sequential patterns in the input sequences of itemsets.</span>

<span class="sd">        .. versionadded:: 2.4.0</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset : :py:class:`pyspark.sql.DataFrame`</span>
<span class="sd">            A dataframe containing a sequence column which is</span>
<span class="sd">            `ArrayType(ArrayType(T))` type, T is the item type for the input dataset.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :py:class:`pyspark.sql.DataFrame`</span>
<span class="sd">            A `DataFrame` that contains columns of sequence and corresponding frequency.</span>
<span class="sd">            The schema of it will be:</span>

<span class="sd">            - `sequence: ArrayType(ArrayType(T))` (T is the item type)</span>
<span class="sd">            - `freq: Long`</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_transfer_params_to_java</span><span class="p">()</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_java_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">jdf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_java_obj</span><span class="o">.</span><span class="n">findFrequentSequentialPatterns</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">_jdf</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">jdf</span><span class="p">,</span> <span class="n">dataset</span><span class="o">.</span><span class="n">sparkSession</span><span class="p">)</span></div></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="kn">import</span> <span class="nn">pyspark.ml.fpm</span>
    <span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">SparkSession</span>

    <span class="n">globs</span> <span class="o">=</span> <span class="n">pyspark</span><span class="o">.</span><span class="n">ml</span><span class="o">.</span><span class="n">fpm</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># The small batch size here ensures that we see multiple batches,</span>
    <span class="c1"># even in these small test examples:</span>
    <span class="n">spark</span> <span class="o">=</span> <span class="n">SparkSession</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">master</span><span class="p">(</span><span class="s2">&quot;local[2]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">appName</span><span class="p">(</span><span class="s2">&quot;ml.fpm tests&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">getOrCreate</span><span class="p">()</span>
    <span class="n">sc</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">sparkContext</span>
    <span class="n">globs</span><span class="p">[</span><span class="s2">&quot;sc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sc</span>
    <span class="n">globs</span><span class="p">[</span><span class="s2">&quot;spark&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">spark</span>
    <span class="kn">import</span> <span class="nn">tempfile</span>

    <span class="n">temp_path</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkdtemp</span><span class="p">()</span>
    <span class="n">globs</span><span class="p">[</span><span class="s2">&quot;temp_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_path</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="p">(</span><span class="n">failure_count</span><span class="p">,</span> <span class="n">test_count</span><span class="p">)</span> <span class="o">=</span> <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">globs</span><span class="o">=</span><span class="n">globs</span><span class="p">,</span> <span class="n">optionflags</span><span class="o">=</span><span class="n">doctest</span><span class="o">.</span><span class="n">ELLIPSIS</span><span class="p">)</span>
        <span class="n">spark</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">shutil</span> <span class="kn">import</span> <span class="n">rmtree</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">rmtree</span><span class="p">(</span><span class="n">temp_path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">if</span> <span class="n">failure_count</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright .<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.4.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>