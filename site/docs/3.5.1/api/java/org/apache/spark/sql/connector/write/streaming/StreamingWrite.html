<!DOCTYPE HTML>
<html lang="ko">
<head>
<!-- Generated by javadoc (17) on Sat Feb 24 16:16:59 KST 2024 -->
<title>StreamingWrite (Spark 3.5.1 JavaDoc)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-02-24">
<meta name="description" content="declaration: package: org.apache.spark.sql.connector.write.streaming, interface: StreamingWrite">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.spark.sql.connector.write.streaming</a></div>
<h1 title="Interface StreamingWrite" class="title">Interface StreamingWrite</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations">@Evolving
</span><span class="modifiers">public interface </span><span class="element-name type-name-label">StreamingWrite</span></div>
<div class="block">An interface that defines how to write the data to data source in streaming queries.

 The writing procedure is:
 <ol>
   <li>Create a writer factory by <a href="#createStreamingWriterFactory(org.apache.spark.sql.connector.write.PhysicalWriteInfo)"><code>createStreamingWriterFactory(PhysicalWriteInfo)</code></a>,
   serialize and send it to all the partitions of the input data(RDD).</li>
   <li>For each epoch in each partition, create the data writer, and write the data of the
   epoch in the partition with this writer. If all the data are written successfully, call
   <a href="../DataWriter.html#commit()"><code>DataWriter.commit()</code></a>. If exception happens during the writing, call
   <a href="../DataWriter.html#abort()"><code>DataWriter.abort()</code></a>.</li>
   <li>If writers in all partitions of one epoch are successfully committed, call
   <a href="#commit(long,org.apache.spark.sql.connector.write.WriterCommitMessage%5B%5D)"><code>commit(long, WriterCommitMessage[])</code></a>. If some writers are aborted, or the job failed
   with an unknown reason, call <a href="#abort(long,org.apache.spark.sql.connector.write.WriterCommitMessage%5B%5D)"><code>abort(long, WriterCommitMessage[])</code></a>.</li>
 </ol>
 <p>
 While Spark will retry failed writing tasks, Spark won't retry failed writing jobs. Users should
 do it manually in their Spark applications if they want to retry.
 <p>
 Please refer to the documentation of commit/abort methods for detailed specifications.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>3.0.0</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab5" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab5', 3)" class="table-tab">Default Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#abort(long,org.apache.spark.sql.connector.write.WriterCommitMessage%5B%5D)" class="member-name-link">abort</a><wbr>(long&nbsp;epochId,
 <a href="../WriterCommitMessage.html" title="interface in org.apache.spark.sql.connector.write">WriterCommitMessage</a>[]&nbsp;messages)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Aborts this writing job because some data writers are failed and keep failing when retried, or
 the Spark job fails with some unknown reasons, or <a href="#commit(long,org.apache.spark.sql.connector.write.WriterCommitMessage%5B%5D)"><code>commit(long, WriterCommitMessage[])</code></a>
 fails.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#commit(long,org.apache.spark.sql.connector.write.WriterCommitMessage%5B%5D)" class="member-name-link">commit</a><wbr>(long&nbsp;epochId,
 <a href="../WriterCommitMessage.html" title="interface in org.apache.spark.sql.connector.write">WriterCommitMessage</a>[]&nbsp;messages)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Commits this writing job for the specified epoch with a list of commit messages.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="StreamingDataWriterFactory.html" title="interface in org.apache.spark.sql.connector.write.streaming">StreamingDataWriterFactory</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#createStreamingWriterFactory(org.apache.spark.sql.connector.write.PhysicalWriteInfo)" class="member-name-link">createStreamingWriterFactory</a><wbr>(<a href="../PhysicalWriteInfo.html" title="interface in org.apache.spark.sql.connector.write">PhysicalWriteInfo</a>&nbsp;info)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Creates a writer factory which will be serialized and sent to executors.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#useCommitCoordinator()" class="member-name-link">useCommitCoordinator</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Returns whether Spark should use the commit coordinator to ensure that at most one task for
 each partition commits.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="createStreamingWriterFactory(org.apache.spark.sql.connector.write.PhysicalWriteInfo)">
<h3>createStreamingWriterFactory</h3>
<div class="member-signature"><span class="return-type"><a href="StreamingDataWriterFactory.html" title="interface in org.apache.spark.sql.connector.write.streaming">StreamingDataWriterFactory</a></span>&nbsp;<span class="element-name">createStreamingWriterFactory</span><wbr><span class="parameters">(<a href="../PhysicalWriteInfo.html" title="interface in org.apache.spark.sql.connector.write">PhysicalWriteInfo</a>&nbsp;info)</span></div>
<div class="block">Creates a writer factory which will be serialized and sent to executors.
 <p>
 If this method fails (by throwing an exception), the action will fail and no Spark job will be
 submitted.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>info</code> - Information about the RDD that will be written to this data writer</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="useCommitCoordinator()">
<h3>useCommitCoordinator</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">useCommitCoordinator</span>()</div>
<div class="block">Returns whether Spark should use the commit coordinator to ensure that at most one task for
 each partition commits.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if commit coordinator should be used, false otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="commit(long,org.apache.spark.sql.connector.write.WriterCommitMessage[])">
<h3>commit</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">commit</span><wbr><span class="parameters">(long&nbsp;epochId,
 <a href="../WriterCommitMessage.html" title="interface in org.apache.spark.sql.connector.write">WriterCommitMessage</a>[]&nbsp;messages)</span></div>
<div class="block">Commits this writing job for the specified epoch with a list of commit messages. The commit
 messages are collected from successful data writers and are produced by
 <a href="../DataWriter.html#commit()"><code>DataWriter.commit()</code></a>.
 <p>
 If this method fails (by throwing an exception), this writing job is considered to have been
 failed, and the execution engine will attempt to call
 <a href="#abort(long,org.apache.spark.sql.connector.write.WriterCommitMessage%5B%5D)"><code>abort(long, WriterCommitMessage[])</code></a>.
 <p>
 The execution engine may call <code>commit</code> multiple times for the same epoch in some
 circumstances. To support exactly-once data semantics, implementations must ensure that
 multiple commits for the same epoch are idempotent.</div>
</section>
</li>
<li>
<section class="detail" id="abort(long,org.apache.spark.sql.connector.write.WriterCommitMessage[])">
<h3>abort</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">abort</span><wbr><span class="parameters">(long&nbsp;epochId,
 <a href="../WriterCommitMessage.html" title="interface in org.apache.spark.sql.connector.write">WriterCommitMessage</a>[]&nbsp;messages)</span></div>
<div class="block">Aborts this writing job because some data writers are failed and keep failing when retried, or
 the Spark job fails with some unknown reasons, or <a href="#commit(long,org.apache.spark.sql.connector.write.WriterCommitMessage%5B%5D)"><code>commit(long, WriterCommitMessage[])</code></a>
 fails.
 <p>
 If this method fails (by throwing an exception), the underlying data source may require manual
 cleanup.
 <p>
 Unless the abort is triggered by the failure of commit, the given messages will have some
 null slots, as there may be only a few data writers that were committed before the abort
 happens, or some data writers were committed but their commit messages haven't reached the
 driver when the abort is triggered. So this is just a "best effort" for data sources to
 clean up the data left by data writers.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
<script defer="defer" type="text/javascript" src="../../../../../../../lib/jquery.js"></script><script defer="defer" type="text/javascript" src="../../../../../../../lib/api-javadocs.js"></script></body>
</html>
