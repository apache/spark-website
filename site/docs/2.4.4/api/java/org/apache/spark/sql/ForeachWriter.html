<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_222) on Tue Aug 27 22:14:23 UTC 2019 -->
<title>ForeachWriter (Spark 2.4.4 JavaDoc)</title>
<meta name="date" content="2019-08-27">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ForeachWriter (Spark 2.4.4 JavaDoc)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/spark/sql/ExperimentalMethods.html" title="class in org.apache.spark.sql"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/spark/sql/functions.html" title="class in org.apache.spark.sql"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/spark/sql/ForeachWriter.html" target="_top">Frames</a></li>
<li><a href="ForeachWriter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.spark.sql</div>
<h2 title="Class ForeachWriter" class="title">Class ForeachWriter&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>Object</li>
<li>
<ul class="inheritance">
<li>org.apache.spark.sql.ForeachWriter&lt;T&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Serializable</dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">ForeachWriter&lt;T&gt;</span>
extends Object
implements scala.Serializable</pre>
<div class="block">The abstract class for writing custom logic to process data generated by a query.
 This is often used to write the output of a streaming query to arbitrary storage systems.
 Any implementation of this base class will be used by Spark in the following way.
 <p>
 <ul>
 <li>A single instance of this class is responsible of all the data generated by a single task
     in a query. In other words, one instance is responsible for processing one partition of the
     data generated in a distributed manner.
 <p>
 <li>Any implementation of this class must be serializable because each task will get a fresh
     serialized-deserialized copy of the provided object. Hence, it is strongly recommended that
     any initialization for writing data (e.g. opening a connection or starting a transaction)
     is done after the <code>open(...)</code> method has been called, which signifies that the task is
     ready to generate data.
 <p>
 <li>The lifecycle of the methods are as follows.
 <p>
   <pre>
   For each partition with `partitionId`:
       For each batch/epoch of streaming data (if its streaming query) with `epochId`:
           Method `open(partitionId, epochId)` is called.
           If `open` returns true:
                For each row in the partition and batch/epoch, method `process(row)` is called.
           Method `close(errorOrNull)` is called with error (if any) seen while processing rows.
   </pre>
 <p>
 </ul>
 <p>
 Important points to note:
 <ul>
 <li>Spark doesn't guarantee same output for (partitionId, epochId), so deduplication
     cannot be achieved with (partitionId, epochId). e.g. source provides different number of
     partitions for some reason, Spark optimization changes number of partitions, etc.
     Refer SPARK-28650 for more details. If you need deduplication on output, try out
     <code>foreachBatch</code> instead.
 <p>
 <li>The <code>close()</code> method will be called if <code>open()</code> method returns successfully (irrespective
     of the return value), except if the JVM crashes in the middle.
 </ul>
 <p>
 Scala example:
 <pre><code>
   datasetOfString.writeStream.foreach(new ForeachWriter[String] {

     def open(partitionId: Long, version: Long): Boolean = {
       // open connection
     }

     def process(record: String) = {
       // write string to connection
     }

     def close(errorOrNull: Throwable): Unit = {
       // close the connection
     }
   })
 </code></pre>
 <p>
 Java example:
 <pre><code>
  datasetOfString.writeStream().foreach(new ForeachWriter&lt;String&gt;() {

    &#64;Override
    public boolean open(long partitionId, long version) {
      // open connection
    }

    &#64;Override
    public void process(String value) {
      // write string to connection
    }

    &#64;Override
    public void close(Throwable errorOrNull) {
      // close the connection
    }
  });
 </code></pre>
 <p></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>2.0.0</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../serialized-form.html#org.apache.spark.sql.ForeachWriter">Serialized Form</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/apache/spark/sql/ForeachWriter.html#ForeachWriter--">ForeachWriter</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/spark/sql/ForeachWriter.html#close-java.lang.Throwable-">close</a></span>(Throwable&nbsp;errorOrNull)</code>
<div class="block">Called when stopping to process one partition of new data in the executor side.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>abstract boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/spark/sql/ForeachWriter.html#open-long-long-">open</a></span>(long&nbsp;partitionId,
    long&nbsp;epochId)</code>
<div class="block">Called when starting to process one partition of new data in the executor.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/spark/sql/ForeachWriter.html#process-T-">process</a></span>(<a href="../../../../org/apache/spark/sql/ForeachWriter.html" title="type parameter in ForeachWriter">T</a>&nbsp;value)</code>
<div class="block">Called to process the data in the executor side.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ForeachWriter--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ForeachWriter</h4>
<pre>public&nbsp;ForeachWriter()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="close-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public abstract&nbsp;void&nbsp;close(Throwable&nbsp;errorOrNull)</pre>
<div class="block">Called when stopping to process one partition of new data in the executor side. This is
 guaranteed to be called either <code>open</code> returns <code>true</code> or <code>false</code>. However,
 <code>close</code> won't be called in the following cases:
 <p>
 <ul>
 <li>JVM crashes without throwing a <code>Throwable</code></li>
 <li><code>open</code> throws a <code>Throwable</code>.</li>
 </ul>
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>errorOrNull</code> - the error thrown during processing data or null if there was no error.</dd>
</dl>
</li>
</ul>
<a name="open-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>open</h4>
<pre>public abstract&nbsp;boolean&nbsp;open(long&nbsp;partitionId,
                             long&nbsp;epochId)</pre>
<div class="block">Called when starting to process one partition of new data in the executor. See the class
 docs for more information on how to use the <code>partitionId</code> and <code>epochId</code>.
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitionId</code> - the partition id.</dd>
<dd><code>epochId</code> - a unique id for data deduplication.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the corresponding partition and version id should be processed. <code>false</code>
         indicates the partition should be skipped.</dd>
</dl>
</li>
</ul>
<a name="process-java.lang.Object-">
<!--   -->
</a><a name="process-T-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>process</h4>
<pre>public abstract&nbsp;void&nbsp;process(<a href="../../../../org/apache/spark/sql/ForeachWriter.html" title="type parameter in ForeachWriter">T</a>&nbsp;value)</pre>
<div class="block">Called to process the data in the executor side. This method will be called only if <code>open</code>
 returns <code>true</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>value</code> - (undocumented)</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/spark/sql/ExperimentalMethods.html" title="class in org.apache.spark.sql"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/spark/sql/functions.html" title="class in org.apache.spark.sql"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/spark/sql/ForeachWriter.html" target="_top">Frames</a></li>
<li><a href="ForeachWriter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<script defer="defer" type="text/javascript" src="../../../../lib/jquery.js"></script><script defer="defer" type="text/javascript" src="../../../../lib/api-javadocs.js"></script></body>
</html>
