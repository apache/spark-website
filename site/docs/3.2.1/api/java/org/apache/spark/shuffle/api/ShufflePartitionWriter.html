<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_312) on Thu Jan 20 22:06:58 UTC 2022 -->
<title>ShufflePartitionWriter (Spark 3.2.1 JavaDoc)</title>
<meta name="date" content="2022-01-20">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
    <!-- Matomo -->
    <script type="text/javascript">
        var _paq = window._paq = window._paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(["disableCookies"]);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'matomo.php']);
            _paq.push(['setSiteId', '40']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ShufflePartitionWriter (Spark 3.2.1 JavaDoc)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":18,"i2":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/spark/shuffle/api/ShuffleMapOutputWriter.html" title="interface in org.apache.spark.shuffle.api"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/spark/shuffle/api/SingleSpillShuffleMapOutputWriter.html" title="interface in org.apache.spark.shuffle.api"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/spark/shuffle/api/ShufflePartitionWriter.html" target="_top">Frames</a></li>
<li><a href="ShufflePartitionWriter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.spark.shuffle.api</div>
<h2 title="Interface ShufflePartitionWriter" class="title">Interface ShufflePartitionWriter</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@Private
public interface <span class="typeNameLabel">ShufflePartitionWriter</span></pre>
<div class="block">:: Private ::
 An interface for opening streams to persist partition bytes to a backing data store.
 <p>
 This writer stores bytes for one (mapper, reducer) pair, corresponding to one shuffle
 block.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.0.0</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/spark/shuffle/api/ShufflePartitionWriter.html#getNumBytesWritten--">getNumBytesWritten</a></span>()</code>
<div class="block">Returns the number of bytes written either by this writer's output stream opened by
 <a href="../../../../../org/apache/spark/shuffle/api/ShufflePartitionWriter.html#openStream--"><code>openStream()</code></a> or the byte channel opened by <a href="../../../../../org/apache/spark/shuffle/api/ShufflePartitionWriter.html#openChannelWrapper--"><code>openChannelWrapper()</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>default java.util.Optional&lt;<a href="../../../../../org/apache/spark/shuffle/api/WritableByteChannelWrapper.html" title="interface in org.apache.spark.shuffle.api">WritableByteChannelWrapper</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/spark/shuffle/api/ShufflePartitionWriter.html#openChannelWrapper--">openChannelWrapper</a></span>()</code>
<div class="block">Opens and returns a <a href="../../../../../org/apache/spark/shuffle/api/WritableByteChannelWrapper.html" title="interface in org.apache.spark.shuffle.api"><code>WritableByteChannelWrapper</code></a> for transferring bytes from
 input byte channels to the underlying shuffle data store.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.io.OutputStream</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/spark/shuffle/api/ShufflePartitionWriter.html#openStream--">openStream</a></span>()</code>
<div class="block">Open and return an <code>OutputStream</code> that can write bytes to the underlying
 data store.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="openStream--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openStream</h4>
<pre>java.io.OutputStream&nbsp;openStream()
                         throws java.io.IOException</pre>
<div class="block">Open and return an <code>OutputStream</code> that can write bytes to the underlying
 data store.
 <p>
 This method will only be called once on this partition writer in the map task, to write the
 bytes to the partition. The output stream will only be used to write the bytes for this
 partition. The map task closes this output stream upon writing all the bytes for this
 block, or if the write fails for any reason.
 <p>
 Implementations that intend on combining the bytes for all the partitions written by this
 map task should reuse the same OutputStream instance across all the partition writers provided
 by the parent <a href="../../../../../org/apache/spark/shuffle/api/ShuffleMapOutputWriter.html" title="interface in org.apache.spark.shuffle.api"><code>ShuffleMapOutputWriter</code></a>. If one does so, ensure that
 <code>OutputStream.close()</code> does not close the resource, since it will be reused across
 partition writes. The underlying resources should be cleaned up in
 <a href="../../../../../org/apache/spark/shuffle/api/ShuffleMapOutputWriter.html#commitAllPartitions-long:A-"><code>ShuffleMapOutputWriter.commitAllPartitions(long[])</code></a> and
 <a href="../../../../../org/apache/spark/shuffle/api/ShuffleMapOutputWriter.html#abort-java.lang.Throwable-"><code>ShuffleMapOutputWriter.abort(Throwable)</code></a>.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="openChannelWrapper--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openChannelWrapper</h4>
<pre>default&nbsp;java.util.Optional&lt;<a href="../../../../../org/apache/spark/shuffle/api/WritableByteChannelWrapper.html" title="interface in org.apache.spark.shuffle.api">WritableByteChannelWrapper</a>&gt;&nbsp;openChannelWrapper()
                                                                   throws java.io.IOException</pre>
<div class="block">Opens and returns a <a href="../../../../../org/apache/spark/shuffle/api/WritableByteChannelWrapper.html" title="interface in org.apache.spark.shuffle.api"><code>WritableByteChannelWrapper</code></a> for transferring bytes from
 input byte channels to the underlying shuffle data store.
 <p>
 This method will only be called once on this partition writer in the map task, to write the
 bytes to the partition. The channel will only be used to write the bytes for this
 partition. The map task closes this channel upon writing all the bytes for this
 block, or if the write fails for any reason.
 <p>
 Implementations that intend on combining the bytes for all the partitions written by this
 map task should reuse the same channel instance across all the partition writers provided
 by the parent <a href="../../../../../org/apache/spark/shuffle/api/ShuffleMapOutputWriter.html" title="interface in org.apache.spark.shuffle.api"><code>ShuffleMapOutputWriter</code></a>. If one does so, ensure that
 <code>Closeable.close()</code> does not close the resource, since the channel
 will be reused across partition writes. The underlying resources should be cleaned up in
 <a href="../../../../../org/apache/spark/shuffle/api/ShuffleMapOutputWriter.html#commitAllPartitions-long:A-"><code>ShuffleMapOutputWriter.commitAllPartitions(long[])</code></a> and
 <a href="../../../../../org/apache/spark/shuffle/api/ShuffleMapOutputWriter.html#abort-java.lang.Throwable-"><code>ShuffleMapOutputWriter.abort(Throwable)</code></a>.
 <p>
 This method is primarily for advanced optimizations where bytes can be copied from the input
 spill files to the output channel without copying data into memory. If such optimizations are
 not supported, the implementation should return <code>Optional.empty()</code>. By default, the
 implementation returns <code>Optional.empty()</code>.
 <p>
 Note that the returned <a href="../../../../../org/apache/spark/shuffle/api/WritableByteChannelWrapper.html" title="interface in org.apache.spark.shuffle.api"><code>WritableByteChannelWrapper</code></a> itself is closed, but not the
 underlying channel that is returned by <a href="../../../../../org/apache/spark/shuffle/api/WritableByteChannelWrapper.html#channel--"><code>WritableByteChannelWrapper.channel()</code></a>. Ensure
 that the underlying channel is cleaned up in <code>Closeable.close()</code>,
 <a href="../../../../../org/apache/spark/shuffle/api/ShuffleMapOutputWriter.html#commitAllPartitions-long:A-"><code>ShuffleMapOutputWriter.commitAllPartitions(long[])</code></a>, or
 <a href="../../../../../org/apache/spark/shuffle/api/ShuffleMapOutputWriter.html#abort-java.lang.Throwable-"><code>ShuffleMapOutputWriter.abort(Throwable)</code></a>.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="getNumBytesWritten--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getNumBytesWritten</h4>
<pre>long&nbsp;getNumBytesWritten()</pre>
<div class="block">Returns the number of bytes written either by this writer's output stream opened by
 <a href="../../../../../org/apache/spark/shuffle/api/ShufflePartitionWriter.html#openStream--"><code>openStream()</code></a> or the byte channel opened by <a href="../../../../../org/apache/spark/shuffle/api/ShufflePartitionWriter.html#openChannelWrapper--"><code>openChannelWrapper()</code></a>.
 <p>
 This can be different from the number of bytes given by the caller. For example, the
 stream might compress or encrypt the bytes before persisting the data to the backing
 data store.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/spark/shuffle/api/ShuffleMapOutputWriter.html" title="interface in org.apache.spark.shuffle.api"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/spark/shuffle/api/SingleSpillShuffleMapOutputWriter.html" title="interface in org.apache.spark.shuffle.api"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/spark/shuffle/api/ShufflePartitionWriter.html" target="_top">Frames</a></li>
<li><a href="ShufflePartitionWriter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<script defer="defer" type="text/javascript" src="../../../../../lib/jquery.js"></script><script defer="defer" type="text/javascript" src="../../../../../lib/api-javadocs.js"></script></body>
</html>
