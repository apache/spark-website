<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_292) on Mon May 24 05:05:00 UTC 2021 -->
<title>StagingTableCatalog (Spark 3.1.2 JavaDoc)</title>
<meta name="date" content="2021-05-24">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="StagingTableCatalog (Spark 3.1.2 JavaDoc)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html" title="interface in org.apache.spark.sql.connector.catalog"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/spark/sql/connector/catalog/SupportsAtomicPartitionManagement.html" title="interface in org.apache.spark.sql.connector.catalog"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/spark/sql/connector/catalog/StagingTableCatalog.html" target="_top">Frames</a></li>
<li><a href="StagingTableCatalog.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.spark.sql.connector.catalog</div>
<h2 title="Interface StagingTableCatalog" class="title">Interface StagingTableCatalog</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../../../../org/apache/spark/sql/connector/catalog/CatalogPlugin.html" title="interface in org.apache.spark.sql.connector.catalog">CatalogPlugin</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html" title="interface in org.apache.spark.sql.connector.catalog">TableCatalog</a></dd>
</dl>
<hr>
<br>
<pre>@Evolving
public interface <span class="typeNameLabel">StagingTableCatalog</span>
extends <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html" title="interface in org.apache.spark.sql.connector.catalog">TableCatalog</a></pre>
<div class="block">An optional mix-in for implementations of <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html" title="interface in org.apache.spark.sql.connector.catalog"><code>TableCatalog</code></a> that support staging creation of
 the a table before committing the table's metadata along with its contents in CREATE TABLE AS
 SELECT or REPLACE TABLE AS SELECT operations.
 <p>
 It is highly recommended to implement this trait whenever possible so that CREATE TABLE AS
 SELECT and REPLACE TABLE AS SELECT operations are atomic. For example, when one runs a REPLACE
 TABLE AS SELECT operation, if the catalog does not implement this trait, the planner will first
 drop the table via <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#dropTable-org.apache.spark.sql.connector.catalog.Identifier-"><code>TableCatalog.dropTable(Identifier)</code></a>, then create the table via
 <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#createTable-org.apache.spark.sql.connector.catalog.Identifier-org.apache.spark.sql.types.StructType-org.apache.spark.sql.connector.expressions.Transform:A-java.util.Map-"><code>TableCatalog.createTable(Identifier, StructType, Transform[], Map)</code></a>, and then perform
 the write via <a href="../../../../../../org/apache/spark/sql/connector/catalog/SupportsWrite.html#newWriteBuilder-org.apache.spark.sql.connector.write.LogicalWriteInfo-"><code>SupportsWrite.newWriteBuilder(LogicalWriteInfo)</code></a>.
 However, if the write operation fails, the catalog will have already dropped the table, and the
 planner cannot roll back the dropping of the table.
 <p>
 If the catalog implements this plugin, the catalog can implement the methods to "stage" the
 creation and the replacement of a table. After the table's
 <a href="../../../../../../org/apache/spark/sql/connector/write/BatchWrite.html#commit-org.apache.spark.sql.connector.write.WriterCommitMessage:A-"><code>BatchWrite.commit(WriterCommitMessage[])</code></a> is called,
 <a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html#commitStagedChanges--"><code>StagedTable.commitStagedChanges()</code></a> is called, at which point the staged table can
 complete both the data write and the metadata swap operation atomically.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.0.0</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.spark.sql.connector.catalog.TableCatalog">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.apache.spark.sql.connector.catalog.<a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html" title="interface in org.apache.spark.sql.connector.catalog">TableCatalog</a></h3>
<code><a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#OPTION_PREFIX">OPTION_PREFIX</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#PROP_COMMENT">PROP_COMMENT</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#PROP_EXTERNAL">PROP_EXTERNAL</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#PROP_LOCATION">PROP_LOCATION</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#PROP_OWNER">PROP_OWNER</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#PROP_PROVIDER">PROP_PROVIDER</a></code></li>
</ul>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html" title="interface in org.apache.spark.sql.connector.catalog">StagedTable</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/spark/sql/connector/catalog/StagingTableCatalog.html#stageCreate-org.apache.spark.sql.connector.catalog.Identifier-org.apache.spark.sql.types.StructType-org.apache.spark.sql.connector.expressions.Transform:A-java.util.Map-">stageCreate</a></span>(<a href="../../../../../../org/apache/spark/sql/connector/catalog/Identifier.html" title="interface in org.apache.spark.sql.connector.catalog">Identifier</a>&nbsp;ident,
           <a href="../../../../../../org/apache/spark/sql/types/StructType.html" title="class in org.apache.spark.sql.types">StructType</a>&nbsp;schema,
           <a href="../../../../../../org/apache/spark/sql/connector/expressions/Transform.html" title="interface in org.apache.spark.sql.connector.expressions">Transform</a>[]&nbsp;partitions,
           java.util.Map&lt;String,String&gt;&nbsp;properties)</code>
<div class="block">Stage the creation of a table, preparing it to be committed into the metastore.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html" title="interface in org.apache.spark.sql.connector.catalog">StagedTable</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/spark/sql/connector/catalog/StagingTableCatalog.html#stageCreateOrReplace-org.apache.spark.sql.connector.catalog.Identifier-org.apache.spark.sql.types.StructType-org.apache.spark.sql.connector.expressions.Transform:A-java.util.Map-">stageCreateOrReplace</a></span>(<a href="../../../../../../org/apache/spark/sql/connector/catalog/Identifier.html" title="interface in org.apache.spark.sql.connector.catalog">Identifier</a>&nbsp;ident,
                    <a href="../../../../../../org/apache/spark/sql/types/StructType.html" title="class in org.apache.spark.sql.types">StructType</a>&nbsp;schema,
                    <a href="../../../../../../org/apache/spark/sql/connector/expressions/Transform.html" title="interface in org.apache.spark.sql.connector.expressions">Transform</a>[]&nbsp;partitions,
                    java.util.Map&lt;String,String&gt;&nbsp;properties)</code>
<div class="block">Stage the creation or replacement of a table, preparing it to be committed into the metastore
 when the returned table's <a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html#commitStagedChanges--"><code>StagedTable.commitStagedChanges()</code></a> is called.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html" title="interface in org.apache.spark.sql.connector.catalog">StagedTable</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/spark/sql/connector/catalog/StagingTableCatalog.html#stageReplace-org.apache.spark.sql.connector.catalog.Identifier-org.apache.spark.sql.types.StructType-org.apache.spark.sql.connector.expressions.Transform:A-java.util.Map-">stageReplace</a></span>(<a href="../../../../../../org/apache/spark/sql/connector/catalog/Identifier.html" title="interface in org.apache.spark.sql.connector.catalog">Identifier</a>&nbsp;ident,
            <a href="../../../../../../org/apache/spark/sql/types/StructType.html" title="class in org.apache.spark.sql.types">StructType</a>&nbsp;schema,
            <a href="../../../../../../org/apache/spark/sql/connector/expressions/Transform.html" title="interface in org.apache.spark.sql.connector.expressions">Transform</a>[]&nbsp;partitions,
            java.util.Map&lt;String,String&gt;&nbsp;properties)</code>
<div class="block">Stage the replacement of a table, preparing it to be committed into the metastore when the
 returned table's <a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html#commitStagedChanges--"><code>StagedTable.commitStagedChanges()</code></a> is called.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.spark.sql.connector.catalog.TableCatalog">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.spark.sql.connector.catalog.<a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html" title="interface in org.apache.spark.sql.connector.catalog">TableCatalog</a></h3>
<code><a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#alterTable-org.apache.spark.sql.connector.catalog.Identifier-org.apache.spark.sql.connector.catalog.TableChange...-">alterTable</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#createTable-org.apache.spark.sql.connector.catalog.Identifier-org.apache.spark.sql.types.StructType-org.apache.spark.sql.connector.expressions.Transform:A-java.util.Map-">createTable</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#dropTable-org.apache.spark.sql.connector.catalog.Identifier-">dropTable</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#invalidateTable-org.apache.spark.sql.connector.catalog.Identifier-">invalidateTable</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#listTables-java.lang.String:A-">listTables</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#loadTable-org.apache.spark.sql.connector.catalog.Identifier-">loadTable</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#purgeTable-org.apache.spark.sql.connector.catalog.Identifier-">purgeTable</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#renameTable-org.apache.spark.sql.connector.catalog.Identifier-org.apache.spark.sql.connector.catalog.Identifier-">renameTable</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/TableCatalog.html#tableExists-org.apache.spark.sql.connector.catalog.Identifier-">tableExists</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.spark.sql.connector.catalog.CatalogPlugin">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.spark.sql.connector.catalog.<a href="../../../../../../org/apache/spark/sql/connector/catalog/CatalogPlugin.html" title="interface in org.apache.spark.sql.connector.catalog">CatalogPlugin</a></h3>
<code><a href="../../../../../../org/apache/spark/sql/connector/catalog/CatalogPlugin.html#defaultNamespace--">defaultNamespace</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/CatalogPlugin.html#initialize-java.lang.String-org.apache.spark.sql.util.CaseInsensitiveStringMap-">initialize</a>, <a href="../../../../../../org/apache/spark/sql/connector/catalog/CatalogPlugin.html#name--">name</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="stageCreate-org.apache.spark.sql.connector.catalog.Identifier-org.apache.spark.sql.types.StructType-org.apache.spark.sql.connector.expressions.Transform:A-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stageCreate</h4>
<pre><a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html" title="interface in org.apache.spark.sql.connector.catalog">StagedTable</a>&nbsp;stageCreate(<a href="../../../../../../org/apache/spark/sql/connector/catalog/Identifier.html" title="interface in org.apache.spark.sql.connector.catalog">Identifier</a>&nbsp;ident,
                        <a href="../../../../../../org/apache/spark/sql/types/StructType.html" title="class in org.apache.spark.sql.types">StructType</a>&nbsp;schema,
                        <a href="../../../../../../org/apache/spark/sql/connector/expressions/Transform.html" title="interface in org.apache.spark.sql.connector.expressions">Transform</a>[]&nbsp;partitions,
                        java.util.Map&lt;String,String&gt;&nbsp;properties)
                 throws org.apache.spark.sql.catalyst.analysis.TableAlreadyExistsException,
                        org.apache.spark.sql.catalyst.analysis.NoSuchNamespaceException</pre>
<div class="block">Stage the creation of a table, preparing it to be committed into the metastore.
 <p>
 When the table is committed, the contents of any writes performed by the Spark planner are
 committed along with the metadata about the table passed into this method's arguments. If the
 table exists when this method is called, the method should throw an exception accordingly. If
 another process concurrently creates the table before this table's staged changes are
 committed, an exception should be thrown by <a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html#commitStagedChanges--"><code>StagedTable.commitStagedChanges()</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ident</code> - a table identifier</dd>
<dd><code>schema</code> - the schema of the new table, as a struct type</dd>
<dd><code>partitions</code> - transforms to use for partitioning data in the table</dd>
<dd><code>properties</code> - a string map of table properties</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>metadata for the new table</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>org.apache.spark.sql.catalyst.analysis.TableAlreadyExistsException</code> - If a table or view already exists for the identifier</dd>
<dd><code>UnsupportedOperationException</code> - If a requested partition transform is not supported</dd>
<dd><code>org.apache.spark.sql.catalyst.analysis.NoSuchNamespaceException</code> - If the identifier namespace does not exist (optional)</dd>
</dl>
</li>
</ul>
<a name="stageReplace-org.apache.spark.sql.connector.catalog.Identifier-org.apache.spark.sql.types.StructType-org.apache.spark.sql.connector.expressions.Transform:A-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stageReplace</h4>
<pre><a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html" title="interface in org.apache.spark.sql.connector.catalog">StagedTable</a>&nbsp;stageReplace(<a href="../../../../../../org/apache/spark/sql/connector/catalog/Identifier.html" title="interface in org.apache.spark.sql.connector.catalog">Identifier</a>&nbsp;ident,
                         <a href="../../../../../../org/apache/spark/sql/types/StructType.html" title="class in org.apache.spark.sql.types">StructType</a>&nbsp;schema,
                         <a href="../../../../../../org/apache/spark/sql/connector/expressions/Transform.html" title="interface in org.apache.spark.sql.connector.expressions">Transform</a>[]&nbsp;partitions,
                         java.util.Map&lt;String,String&gt;&nbsp;properties)
                  throws org.apache.spark.sql.catalyst.analysis.NoSuchNamespaceException,
                         org.apache.spark.sql.catalyst.analysis.NoSuchTableException</pre>
<div class="block">Stage the replacement of a table, preparing it to be committed into the metastore when the
 returned table's <a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html#commitStagedChanges--"><code>StagedTable.commitStagedChanges()</code></a> is called.
 <p>
 When the table is committed, the contents of any writes performed by the Spark planner are
 committed along with the metadata about the table passed into this method's arguments. If the
 table exists, the metadata and the contents of this table replace the metadata and contents of
 the existing table. If a concurrent process commits changes to the table's data or metadata
 while the write is being performed but before the staged changes are committed, the catalog
 can decide whether to move forward with the table replacement anyways or abort the commit
 operation.
 <p>
 If the table does not exist, committing the staged changes should fail with
 <code>NoSuchTableException</code>. This differs from the semantics of
 <a href="../../../../../../org/apache/spark/sql/connector/catalog/StagingTableCatalog.html#stageCreateOrReplace-org.apache.spark.sql.connector.catalog.Identifier-org.apache.spark.sql.types.StructType-org.apache.spark.sql.connector.expressions.Transform:A-java.util.Map-"><code>stageCreateOrReplace(Identifier, StructType, Transform[], Map)</code></a>, which should create
 the table in the data source if the table does not exist at the time of committing the
 operation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ident</code> - a table identifier</dd>
<dd><code>schema</code> - the schema of the new table, as a struct type</dd>
<dd><code>partitions</code> - transforms to use for partitioning data in the table</dd>
<dd><code>properties</code> - a string map of table properties</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>metadata for the new table</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>UnsupportedOperationException</code> - If a requested partition transform is not supported</dd>
<dd><code>org.apache.spark.sql.catalyst.analysis.NoSuchNamespaceException</code> - If the identifier namespace does not exist (optional)</dd>
<dd><code>org.apache.spark.sql.catalyst.analysis.NoSuchTableException</code> - If the table does not exist</dd>
</dl>
</li>
</ul>
<a name="stageCreateOrReplace-org.apache.spark.sql.connector.catalog.Identifier-org.apache.spark.sql.types.StructType-org.apache.spark.sql.connector.expressions.Transform:A-java.util.Map-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>stageCreateOrReplace</h4>
<pre><a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html" title="interface in org.apache.spark.sql.connector.catalog">StagedTable</a>&nbsp;stageCreateOrReplace(<a href="../../../../../../org/apache/spark/sql/connector/catalog/Identifier.html" title="interface in org.apache.spark.sql.connector.catalog">Identifier</a>&nbsp;ident,
                                 <a href="../../../../../../org/apache/spark/sql/types/StructType.html" title="class in org.apache.spark.sql.types">StructType</a>&nbsp;schema,
                                 <a href="../../../../../../org/apache/spark/sql/connector/expressions/Transform.html" title="interface in org.apache.spark.sql.connector.expressions">Transform</a>[]&nbsp;partitions,
                                 java.util.Map&lt;String,String&gt;&nbsp;properties)
                          throws org.apache.spark.sql.catalyst.analysis.NoSuchNamespaceException</pre>
<div class="block">Stage the creation or replacement of a table, preparing it to be committed into the metastore
 when the returned table's <a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html#commitStagedChanges--"><code>StagedTable.commitStagedChanges()</code></a> is called.
 <p>
 When the table is committed, the contents of any writes performed by the Spark planner are
 committed along with the metadata about the table passed into this method's arguments. If the
 table exists, the metadata and the contents of this table replace the metadata and contents of
 the existing table. If a concurrent process commits changes to the table's data or metadata
 while the write is being performed but before the staged changes are committed, the catalog
 can decide whether to move forward with the table replacement anyways or abort the commit
 operation.
 <p>
 If the table does not exist when the changes are committed, the table should be created in the
 backing data source. This differs from the expected semantics of
 <a href="../../../../../../org/apache/spark/sql/connector/catalog/StagingTableCatalog.html#stageReplace-org.apache.spark.sql.connector.catalog.Identifier-org.apache.spark.sql.types.StructType-org.apache.spark.sql.connector.expressions.Transform:A-java.util.Map-"><code>stageReplace(Identifier, StructType, Transform[], Map)</code></a>, which should fail when
 the staged changes are committed but the table doesn't exist at commit time.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ident</code> - a table identifier</dd>
<dd><code>schema</code> - the schema of the new table, as a struct type</dd>
<dd><code>partitions</code> - transforms to use for partitioning data in the table</dd>
<dd><code>properties</code> - a string map of table properties</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>metadata for the new table</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>UnsupportedOperationException</code> - If a requested partition transform is not supported</dd>
<dd><code>org.apache.spark.sql.catalyst.analysis.NoSuchNamespaceException</code> - If the identifier namespace does not exist (optional)</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/spark/sql/connector/catalog/StagedTable.html" title="interface in org.apache.spark.sql.connector.catalog"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../org/apache/spark/sql/connector/catalog/SupportsAtomicPartitionManagement.html" title="interface in org.apache.spark.sql.connector.catalog"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/spark/sql/connector/catalog/StagingTableCatalog.html" target="_top">Frames</a></li>
<li><a href="StagingTableCatalog.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<script defer="defer" type="text/javascript" src="../../../../../../lib/jquery.js"></script><script defer="defer" type="text/javascript" src="../../../../../../lib/api-javadocs.js"></script></body>
</html>
